"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{47866:function(V,E,r){r.d(E,{Al:function(){return s},Bv:function(){return z},D2:function(){return G},DG:function(){return B},Dz:function(){return j},Gs:function(){return k},Ir:function(){return x},Lk:function(){return w},M1:function(){return I},OM:function(){return e},Pp:function(){return c},Qc:function(){return M},Qs:function(){return d},Uy:function(){return C},Vr:function(){return T},W3:function(){return v},X2:function(){return m},XZ:function(){return N},Xh:function(){return O},aV:function(){return f},bp:function(){return n},c5:function(){return F},c9:function(){return R},cl:function(){return p},d0:function(){return l},f9:function(){return Q},g7:function(){return U},gR:function(){return K},hl:function(){return Z},i4:function(){return S},i9:function(){return D},kL:function(){return L},kP:function(){return W},mL:function(){return $},nc:function(){return u},o6:function(){return a},pV:function(){return b},re:function(){return A},rx:function(){return h},sn:function(){return t},tz:function(){return i},ws:function(){return P},x4:function(){return X},xc:function(){return y},yV:function(){return o}});var i="/admin/goods/addGoods",f="/admin/goods/updateGoods",O="/admin/goods/removeGoods",t="/admin/goods/modifyGoodsStatus",S="/admin/goodsPictures/addGoodsPictures",u="/admin/shoppingCarts/addGoods",F="/admin/shoppingCarts/batchRemoveGoods",p="/admin/shoppingCarts/updateBuyCount",A="/admin/shoppingCarts/queryAllGoodsCount",g="/admin/shoppingCarts/addShoppingCart",D="/admin/goods/queryAllGoods",P="/admin/goods/queryGoodsDetails",T="/admin/shoppingCarts/queryAllShoppingCarts",M="/admin/shoppingCarts/queryAllGoods",W="/admin/shoppingCarts/batchUpdateSelected",k="/admin/orders/queryAllOrders",$="/admin/orders/queryOrderDetails",U="/admin/orders/addOrder",o="/admin/orders/updateOrderBaseInfo",j="/admin/orders/updateOrderGoodsBuyCount",Q="/admin/orders/addOrderGoods",N="/admin/orders/removeOrder",x="/admin/catalogs/queryAllCatalogs",L="/admin/catalogs/createCatalog",a="/admin/catalogs/updateCatalog",e="/admin/catalogs/removeCatalog",n="/admin/users/queryAllUsers",v="/admin/users/addUser",C="/admin/users/updateUser",d="/admin/users/queryUserDetails",B="/admin/users/removeUser",K="/custom/shoppingCarts/queryAllGoods",s="/custom/shoppingCarts/updateBuyCount",w="/custom/goods/queryAllGoods",G="/custom/goods/queryGoodsDetails",m="/custom/shoppingCarts/addShoppingCart",l="/custom/shoppingCarts/addGoods",h="/custom/shoppingCarts/batchRemoveGoods",c="/custom/shoppingCarts/queryAllGoodsCount",I="/custom/shoppingCarts/batchUpdateSelected",y="/custom/orders/queryAllOrders",b="/custom/orders/queryOrderDetails",R="/custom/orders/cancelOrder",Z="/custom/orders/checkOrder",z="/custom/catalogs/queryAllCatalogs",X="/user/login",H="/user/logout"},12860:function(V,E,r){r.d(E,{T:function(){return f},x:function(){return O}});var i=r(61544),f=function(S){return[{title:"\u5F00\u5355",className:"baby-love-admin-home-item-open",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u7528\u6237",className:"baby-love-admin-home-item-users",onClick:function(){return(0,i.WF)("/user/list",!0)}},{title:"\u5546\u54C1",className:"baby-love-admin-home-item-goods",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269",className:"baby-love-admin-home-item-cart",onClick:function(){return(0,i.WF)("/shopping-cart?shoppingCartCode=".concat(S||""),!0)}},{title:"\u8BA2\u5355",className:"baby-love-admin-home-item-order",onClick:function(){return(0,i.WF)("/order/list",!0)}},{title:"\u5206\u7C7B",className:"baby-love-admin-home-item-catalog",onClick:function(){return(0,i.WF)("/catalog/list",!0)}}]},O=function(S){return{custom:[{title:"\u5546\u54C1",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return(0,i.WF)("/shopping-cart?shoppingCartCode=".concat(S||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return(0,i.WF)("/order/list?shoppingCartCode=".concat(S||""),!0)}}],admin:[{title:"\u5546\u54C1",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return(0,i.WF)("/shopping-cart?shoppingCartCode=".concat(S||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return(0,i.WF)("/order/list",!0)}}]}}},42912:function(V,E,r){var i=r(6154),f=r(12695),O=r(61544),t=function(A){f.FN.show({icon:"fail",content:A||"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"})};function S(p){var A=p||{},g=A.data;return g?((!g||g.code!==200||!g.success)&&t(g.message||"\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.resolve(g)):(t("\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.reject(g))}function u(p){if(!window.navigator.onLine)return t("\u7F51\u7EDC\u5DF2\u65AD\u5F00"),Promise.reject(p.response||{});var A=p.response||{},g=A.status,D=A.data;if(g){switch(g){case 401:t((D==null?void 0:D.message)||"\u8BF7\u5148\u767B\u5F55"),(0,O.f9)(),(0,O.GL)();break;case 404:t("\u8BF7\u6C42\u4E0D\u5B58\u5728");break;default:t((D==null?void 0:D.message)||"\u8BF7\u6C42\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5")}return Promise.reject(p.response||{})}}var F=i.Z.create({timeout:12e3});F.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",F.interceptors.request.use(function(p){return p},function(p){return Promise.error(p)}),F.interceptors.response.use(S,u),E.Z=F},61544:function(V,E,r){r.d(E,{F3:function(){return N},GJ:function(){return g},GL:function(){return T},JG:function(){return L},Te:function(){return o},V2:function(){return M},WF:function(){return P},YX:function(){return U},f9:function(){return W},hf:function(){return j},on:function(){return Q},xE:function(){return x},y7:function(){return k},yV:function(){return D}});var i=r(15009),f=r.n(i),O=r(99289),t=r.n(O),S=r(82188),u=r(42912),F=r(12860),p=r(12695),A=r(47866),g=location.pathname.startsWith("/view/admin"),D=function(){return["/view/admin/login","/view/custom/login","/view/login"].includes(location.pathname)},P=function(e,n,v){e&&(v||(location.pathname.startsWith("/view/admin")?e="/view/admin".concat(e):e="/view".concat(e)),n?location.href=e:S.m8.push(e))},T=function(){P("/login?callback=".concat(encodeURIComponent(location.href)),!0)},M=function(){localStorage.setItem("babyLoveToken","1")},W=function(){localStorage.removeItem("babyLoveToken")},k=function(){return!!localStorage.getItem("babyLoveToken")},$=function(){var a=t()(f()().mark(function e(){var n,v;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,u.Z.post(A.X2);case 2:return n=d.sent,v=n.data,d.abrupt("return",v?v.shoppingCartCode:null);case 5:case"end":return d.stop()}},e)}));return function(){return a.apply(this,arguments)}}(),U=function(){var a=t()(f()().mark(function e(){var n;return f()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(n=localStorage.getItem("babyloveShoppingCartCode"),n){C.next=5;break}return C.next=4,$();case 4:n=C.sent;case 5:if(n){C.next=7;break}return C.abrupt("return",p.FN.show({icon:"fail",content:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"}));case 7:return localStorage.setItem("babyloveShoppingCartCode",n),C.abrupt("return",n);case 9:case"end":return C.stop()}},e)}));return function(){return a.apply(this,arguments)}}(),o=function(e){e&&localStorage.setItem("babyloveShoppingCartCode",e)},j=function(e){e&&localStorage.setItem("babyloveAdminShoppingCartCode",e)},Q=function(){return localStorage.getItem("babyloveAdminShoppingCartCode")},N=function(){localStorage.removeItem("babyloveAdminShoppingCartCode")},x=function(){var a=t()(f()().mark(function e(){var n,v;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,U();case 2:if(n=d.sent,v=(0,F.x)(n),!g){d.next=6;break}return d.abrupt("return",v.admin);case 6:return d.abrupt("return",v.custom);case 7:case"end":return d.stop()}},e)}));return function(){return a.apply(this,arguments)}}(),L=function(e){if(!e)return!1;try{var n=document.createElement("input");return n.value=e,n.style.height=0,document.body.append(n),n.select(),document.execCommand("Copy"),n.remove(),!0}catch(v){return!1}}},57590:function(V,E,r){r.r(E),r.d(E,{default:function(){return v}});var i=r(97857),f=r.n(i),O=r(15009),t=r.n(O),S=r(99289),u=r.n(S),F=r(12444),p=r.n(F),A=r(72004),g=r.n(A),D=r(25098),P=r.n(D),T=r(31996),M=r.n(T),W=r(26037),k=r.n(W),$=r(9783),U=r.n($),o=r(12695),j=r(67294),Q=r(71167),N=r.n(Q),x=r(40190),L=r(47866),a=r(42912),e=r(85893),n=function(C){M()(B,C);var d=k()(B);function B(K){var s;p()(this,B),s=d.call(this,K),U()(P()(s),"formRef",j.createRef()),U()(P()(s),"getCatalogList",u()(t()().mark(function G(){var m,l;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,a.Z.post(L.Ir);case 2:m=c.sent,l=m.data,Array.isArray(l)&&s.setState({catalogList:l});case 5:case"end":return c.stop()}},G)}))),U()(P()(s),"getGoodsDetails",u()(t()().mark(function G(){var m,l,h,c;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(s.goodsCode){y.next=2;break}return y.abrupt("return");case 2:return y.next=4,a.Z.get(L.ws,{params:{goodsCode:s.goodsCode}});case 4:m=y.sent,l=m.data,l&&(c=f()({},l),Array.isArray(l.pictures)&&(c.pictures=c.pictures.map(function(b){return f()(f()({},b),{},{url:b.pictureUrl})})),(h=s.formRef.current)===null||h===void 0||h.setFieldsValue(c));case 7:case"end":return y.stop()}},G)}))),U()(P()(s),"uploadImgFile",function(){var G=u()(t()().mark(function m(l){var h,c,I;return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return h=new FormData,h.append("files",l),b.next=4,a.Z.post(L.i4,h,{headers:{"Content-Type":"multipart/form-data"}});case 4:if(c=b.sent,I=c.data,!(I&&I[0])){b.next=10;break}return b.abrupt("return",{pictureCode:I[0].pictureCode,url:I[0].pictureUrl});case 10:return b.abrupt("return",{});case 11:case"end":return b.stop()}},m)}));return function(m){return G.apply(this,arguments)}}()),U()(P()(s),"save",u()(t()().mark(function G(){var m,l,h,c,I,y;return t()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return l=(m=s.formRef.current)===null||m===void 0?void 0:m.getFieldsValue(),l.goodsPictureCodes=l.pictures.map(function(Z){return Z.pictureCode}),h=L.tz,s.goodsCode&&(l.goodsCode=s.goodsCode,h=L.aV),R.next=6,a.Z.post(h,l);case 6:c=R.sent,I=c.success,I&&(o.FN.show({content:"\u4FDD\u5B58\u6210\u529F",icon:"success"}),!s.goodsCode&&((y=s.formRef.current)===null||y===void 0||y.resetFields()));case 9:case"end":return R.stop()}},G)}))),s.state={catalogList:[]};var w=new URLSearchParams(location.search);return s.goodsCode=w.get("goodsCode"),s}return g()(B,[{key:"componentDidMount",value:function(){this.getCatalogList(),this.getGoodsDetails()}},{key:"render",value:function(){var s=this.state,w=s.goodsDetails,G=s.catalogList;return(0,e.jsx)("div",{className:"baby-love-goods-edit",children:(0,e.jsx)("div",{className:"baby-love-goods-edit-form",children:(0,e.jsxs)(o.l0,{ref:this.formRef,footer:(0,e.jsx)(o.zx,{block:!0,type:"submit",color:"primary",size:"large",onClick:this.save,children:"\u4FDD\u5B58"}),children:[(0,e.jsx)(o.l0.Item,{name:"goodsCatalog",label:"\u5546\u54C1\u5206\u7C7B",rules:[{required:!0,message:"\u5546\u54C1\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.Y8.Group,{children:G.map(function(m){return(0,e.jsx)(o.Y8,{value:m.catalogCode,children:m.catalogName})})})}),(0,e.jsx)(o.l0.Item,{name:"goodsTitle",label:"\u5546\u54C1\u6807\u9898",rules:[{required:!0,message:"\u5546\u54C1\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6807\u9898"})}),(0,e.jsx)(o.l0.Item,{name:"goodsSubtitle",label:"\u5546\u54C1\u526F\u6807\u9898",rules:[{required:!1,message:"\u5546\u54C1\u526F\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u526F\u6807\u9898"})}),(0,e.jsx)(o.l0.Item,{name:"pictures",label:"\u5546\u54C1\u56FE\u7247",rules:[{required:!0,message:"\u5546\u54C1\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.wA,{upload:this.uploadImgFile})}),(0,e.jsx)(o.l0.Item,{name:"goodsPrice",label:"\u5546\u54C1\u4EF7\u683C",rules:[{required:!0,message:"\u5546\u54C1\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u4EF7\u683C"})}),(0,e.jsx)(o.l0.Item,{name:"goodsOriginPrice",label:"\u5546\u54C1\u539F\u4EF7",rules:[{required:!0,message:"\u5546\u54C1\u539F\u4EF7\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u539F\u4EF7"})}),(0,e.jsx)(o.l0.Item,{name:"goodsInventory",label:"\u5546\u54C1\u5E93\u5B58",rules:[{required:!0,message:"\u5546\u54C1\u5E93\u5B58\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5E93\u5B58"})}),(0,e.jsx)(o.l0.Item,{name:"goodsDetails",label:"\u5546\u54C1\u8BE6\u60C5",rules:[{required:!1,message:"\u5546\u54C1\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(N(),{theme:"snow",value:w,onChange:this.setGoodsDetails})})]})})})}}]),B}(j.Component),v=n}}]);
