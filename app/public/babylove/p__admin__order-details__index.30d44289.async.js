"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[741],{89774:function(ee,O,a){a.r(O),a.d(O,{default:function(){return w}});var B=a(15009),N=a.n(B),L=a(99289),E=a.n(L),$=a(12444),y=a.n($),P=a(72004),j=a.n(P),G=a(25098),f=a.n(G),M=a(31996),g=a.n(M),I=a(26037),b=a.n(I),z=a(9783),x=a.n(z),c=a(12695),T=a(27484),H=a.n(T),F=a(67294),S=a(47866),W=a(42912),A=a(61544),m=a(92692),s=a(85893),R=function(h){g()(r,h);var p=b()(r);function r(i){var e;return y()(this,r),e=p.call(this,i),x()(f()(e),"cancelOrder",E()(N()().mark(function o(){var l,u,t,v;return N()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,c.Vq.confirm({content:"\u786E\u5B9A\u53D6\u6D88\u8BA2\u5355\u5417\uFF1F"});case 2:if(l=d.sent,l){d.next=5;break}return d.abrupt("return");case 5:return e.setState({isCanceling:!0}),d.next=8,W.Z.post(S.yV,{orderCode:e.props.orderCode,orderStatus:m.iM.CANCELED.value});case 8:u=d.sent,t=u.success,v=u.message,t?(c.FN.show({content:"\u53D6\u6D88\u6210\u529F",icon:"success"}),e.props.flushOrderDetails()):c.FN.show({content:v||"\u53D6\u6D88\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"fail"}),e.setState({isCanceling:!1});case 13:case"end":return d.stop()}},o)}))),x()(f()(e),"toEditOrder",function(){(0,A.WF)("/order/edit?orderCode=".concat(e.props.orderCode))}),x()(f()(e),"lookLogistics",function(){if((0,A.JG)(e.props.expressCode)){c.FN.show({icon:"success",content:"\u7269\u6D41\u5355\u53F7\u5DF2\u590D\u5236\uFF0C\u8DF3\u8F6C\u67E5\u8BE2\u4E2D...",duration:2e3}),setTimeout(function(){window.open("https://m.kuaidi100.com/index.jsp")},2e3);return}c.FN.show({icon:"fail",content:"\u7269\u6D41\u5355\u53F7\u590D\u5236\u5931\u8D25"})}),e.state={isCanceling:!1},e}return j()(r,[{key:"render",value:function(){var e=[m.iM.WAIT_GET.value,m.iM.FINISHED.value,m.iM.CANCELED.value].includes(this.props.orderStatus),o=[m.iM.FINISHED.value,m.iM.CANCELED.value].includes(this.props.orderStatus);return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-actions",children:[(0,s.jsx)(c.zx,{color:"primary",size:"small",disabled:o,onClick:this.cancelOrder,loading:this.state.isCanceling,children:"\u53D6\u6D88\u8BA2\u5355"}),(0,s.jsx)(c.zx,{color:"primary",size:"small",disabled:e,onClick:this.toEditOrder,children:"\u4FEE\u6539\u8BA2\u5355"}),(0,s.jsx)(c.zx,{color:"primary",size:"small",disabled:!this.props.expressCode,onClick:this.lookLogistics,children:"\u67E5\u8BE2\u7269\u6D41"})]})}}]),r}(F.Component),k=R,Y=function(h){g()(r,h);var p=b()(r);function r(i){var e;return y()(this,r),e=p.call(this,i),x()(f()(e),"copyExpressCode",function(){var o=(0,A.JG)(e.props.expressCode);o?c.FN.show({content:"\u590D\u5236\u6210\u529F",icon:"success"}):c.FN.show({content:"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",icon:"fail"})}),e.state={},e}return j()(r,[{key:"render",value:function(){var e,o=this.props,l=o.orderCode,u=o.createdAt,t=o.totalPrice,v=o.expressWay,n=o.expressCode,d=o.expressAddress,D=o.payWay,C=o.user;return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info",children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u8BA2\u5355\u7F16\u53F7\uFF1A"}),(0,s.jsx)("span",{children:l})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u8BA2\u5355\u65F6\u95F4\uFF1A"}),(0,s.jsx)("span",{children:u})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u8BA2\u5355\u603B\u4EF7\uFF1A"}),(0,s.jsxs)("span",{children:["\xA5",t]})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u5173\u8054\u7528\u6237\uFF1A"}),(0,s.jsx)("span",{children:(0,s.jsx)(c.mH,{direction:"end",rows:1,content:C?"".concat(C.userName,"(").concat(C.userNickname||C.userCode,")"):"-"})})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u652F\u4ED8\u65B9\u5F0F\uFF1A"}),(0,s.jsx)("span",{children:((e=m.Zm[D])===null||e===void 0?void 0:e.title)||"-"})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u914D\u9001\u65B9\u5F0F\uFF1A"}),(0,s.jsx)("span",{children:v||"-"})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u5FEB\u9012\u5355\u53F7\uFF1A"}),(0,s.jsx)("span",{children:n||"-"}),n&&(0,s.jsx)(c.zx,{color:"primary",disabled:!n,fill:"none",onClick:n?this.copyExpressCode:null,children:"\u590D\u5236\u5FEB\u9012\u5355\u53F7"})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u914D\u9001\u5730\u5740\uFF1A"}),(0,s.jsx)("span",{children:d||"-"})]})]})}}]),r}(F.Component),U=Y,Z=a(90336),J=function(h){g()(r,h);var p=b()(r);function r(i){var e;return y()(this,r),e=p.call(this,i),x()(f()(e),"toGoodsDetail",function(o){(0,A.WF)("/goods/details?goodsCode=".concat(o))}),e.state={},e}return j()(r,[{key:"render",value:function(){var e=this,o=this.props,l=o.goods,u=o.totalCount;return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods",children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods-header",children:[(0,s.jsx)("span",{className:"baby-love-admin-order-details-goods-total-shop",children:"BabyLove"}),(0,s.jsxs)("span",{className:"baby-love-admin-order-details-goods-total-count",children:["\u5171 ",u," \u4EF6\u5546\u54C1"]})]}),(0,s.jsx)("ul",{children:(l||[]).map(function(t){var v,n,d;return(0,s.jsxs)("li",{onClick:function(){return e.toGoodsDetail(t.goodsCode)},children:[(0,s.jsx)("div",{className:"baby-love-admin-order-details-goods-picture",style:{backgroundImage:"url(".concat(((v=t.pictures)===null||v===void 0||(n=v[0])===null||n===void 0?void 0:n.pictureUrl)||Z,")")}}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods-info",children:[(0,s.jsx)("div",{className:"baby-love-admin-order-details-goods-title",children:(0,s.jsx)(c.mH,{direction:"end",rows:2,content:t.goodsTitle})}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods-details",children:[(0,s.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-price",children:["\xA5",t.goodsPrice,(0,s.jsx)("span",{className:"baby-love-admin-order-details-goods-item-origin-price",children:t.goodsOriginPrice?"\xA5".concat(t.goodsOriginPrice):""})]}),(0,s.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-count",children:["x",((d=t.ordersGoodsRelations)===null||d===void 0?void 0:d.buyCount)||"?"]})]})]})]},t)})})]})}}]),r}(F.Component),V=J,K=function(h){g()(r,h);var p=b()(r);function r(i){var e;return y()(this,r),e=p.call(this,i),e.state={},e}return j()(r,[{key:"render",value:function(){var e=m.iM[this.props.orderStatus]||{},o=e.icon,l=e.title,u=e.backgroundColor;return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-status",style:{backgroundColor:u},children:[o,(0,s.jsx)("span",{children:l})]})}}]),r}(F.Component),Q=K,X=function(h){g()(r,h);var p=b()(r);function r(i){var e;y()(this,r),e=p.call(this,i),x()(f()(e),"setLoading",function(l){e.setState({isShowLoading:l})}),x()(f()(e),"getOrderDetails",E()(N()().mark(function l(){var u,t;return N()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.orderCode){n.next=2;break}return n.abrupt("return");case 2:return e.setLoading(!0),n.next=5,W.Z.post(S.mL,{orderCode:e.orderCode});case 5:u=n.sent,t=u.data,t&&(t.createdAt=H()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"),e.setState({orderDetails:t})),e.setLoading(!1);case 9:case"end":return n.stop()}},l)}))),e.state={orderDetails:{},isShowLoading:!1};var o=new URLSearchParams(location.search);return e.orderCode=o.get("orderCode"),e}return j()(r,[{key:"componentDidMount",value:function(){this.getOrderDetails()}},{key:"render",value:function(){var e=this.state.orderDetails||{},o=e.status,l=e.orderCode,u=e.expressWay,t=e.expressCode,v=e.expressAddress,n=e.totalPrice,d=e.payWay,D=e.createdAt,C=e.goods,q=e.totalCount,_=e.user;return(0,s.jsx)("div",{className:"baby-love-admin-order-details",children:this.state.isShowLoading?(0,s.jsx)(c.k_,{color:"primary"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-details-info",children:[(0,s.jsx)(Q,{orderStatus:o}),(0,s.jsx)(U,{orderCode:l,createdAt:D,expressWay:u,expressCode:t,expressAddress:v,totalPrice:n,payWay:d,user:_}),(0,s.jsx)(V,{goods:C,totalCount:q})]}),(0,s.jsx)(k,{orderCode:l,orderStatus:o,expressCode:t,flushOrderDetails:this.getOrderDetails})]})})}}]),r}(F.Component),w=X}}]);
