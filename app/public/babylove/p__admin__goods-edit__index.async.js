"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{47866:function(Z,D,r){r.d(D,{Al:function(){return k},D2:function(){return j},Dz:function(){return o},Gs:function(){return $},Lk:function(){return x},M1:function(){return p},Pp:function(){return m},Qc:function(){return T},Vr:function(){return c},X2:function(){return t},Xh:function(){return b},aV:function(){return u},c5:function(){return G},c9:function(){return M},cl:function(){return y},d0:function(){return e},f9:function(){return P},g7:function(){return Q},gR:function(){return N},i4:function(){return l},i9:function(){return d},kP:function(){return E},mL:function(){return U},nc:function(){return B},pV:function(){return L},re:function(){return i},rx:function(){return n},tz:function(){return O},ws:function(){return R},x4:function(){return a},xc:function(){return s},yV:function(){return A}});var O="/admin/goods/addGoods",u="/admin/goods/updateGoods",b="/admin/goods/removeGoods",l="/admin/goodsPictures/addGoodsPictures",B="/admin/shoppingCarts/addGoods",G="/admin/shoppingCarts/batchRemoveGoods",y="/admin/shoppingCarts/updateBuyCount",i="/admin/shoppingCarts/queryAllGoodsCount",C="/admin/shoppingCarts/addShoppingCart",d="/admin/goods/queryAllGoods",R="/admin/goods/queryGoodsDetails",c="/admin/shoppingCarts/queryAllShoppingCarts",T="/admin/shoppingCarts/queryAllGoods",E="/admin/shoppingCarts/batchUpdateSelected",$="/admin/orders/queryAllOrders",U="/admin/orders/queryOrderDetails",Q="/admin/orders/addOrder",A="/admin/orders/updateOrderBaseInfo",o="/admin/orders/updateOrderGoodsBuyCount",P="/admin/orders/addOrderGoods",N="/custom/shoppingCarts/queryAllGoods",k="/custom/shoppingCarts/updateBuyCount",x="/custom/goods/queryAllGoods",j="/custom/goods/queryGoodsDetails",t="/custom/shoppingCarts/addShoppingCart",e="/custom/shoppingCarts/addGoods",n="/custom/shoppingCarts/batchRemoveGoods",m="/custom/shoppingCarts/queryAllGoodsCount",p="/custom/shoppingCarts/batchUpdateSelected",s="/custom/orders/queryAllOrders",L="/custom/orders/queryOrderDetails",M="/custom/orders/cancelOrder",a="/user/login",z="/user/logout"},42912:function(Z,D,r){var O=r(6154),u=r(16763),b=r(82405),l=function(C){u.FN.show({icon:"fail",content:C||"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"})};function B(i){console.log("===========http===========",i);var C=i||{},d=C.data;return d?((!d||d.code!==200||!d.success)&&l(d.message||"\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.resolve(d)):(l("\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.reject(d))}function G(i){if(!window.navigator.onLine)return l("\u7F51\u7EDC\u5DF2\u65AD\u5F00"),Promise.reject(i.response||{});var C=i.response,d=C.status,R=C.data;if(d){switch(d){case 401:l("\u8BF7\u5148\u767B\u5F55"),(0,b.f9)(),(0,b.GL)();break;case 404:l("\u8BF7\u6C42\u4E0D\u5B58\u5728");break;default:l(R.message||"\u8BF7\u6C42\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5")}return Promise.reject(i.response||{})}}var y=O.Z.create({timeout:12e3});y.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",y.interceptors.request.use(function(i){return i},function(i){return Promise.error(i)}),y.interceptors.response.use(B,G),D.Z=y},82405:function(Z,D,r){r.d(D,{y7:function(){return U},JG:function(){return j},on:function(){return N},xE:function(){return x},YX:function(){return A},WF:function(){return c},GJ:function(){return d},Xn:function(){return R},F3:function(){return k},f9:function(){return $},hf:function(){return P},V2:function(){return E},Te:function(){return o},GL:function(){return T}});var O=r(15009),u=r.n(O),b=r(99289),l=r.n(b),B=r(82188),G=r(42912),y=function(e){return{custom:[{title:"\u5546\u54C1",onClick:function(){return c("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return c("/shopping-cart?shoppingCartCode=".concat(e||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return c("/order/list?shoppingCartCode=".concat(e||""),!0)}}],admin:[{title:"\u5546\u54C1",onClick:function(){return c("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return c("/shopping-cart?shoppingCartCode=".concat(e||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return c("/order/list",!0)}}]}},i=r(16763),C=r(47866),d=location.pathname.startsWith("/view/admin"),R=["/view/admin/login","/view/custom/login","/view/login"].includes(location.pathname),c=function(e,n,m){e&&(m||(location.pathname.startsWith("/view/admin/")?e="/view/admin".concat(e):e="/view".concat(e)),n?location.href=e:B.m8.push(e))},T=function(){c("/login?callback=".concat(location.pathname),!0)},E=function(){sessionStorage.setItem("babyLoveToken","1")},$=function(){sessionStorage.removeItem("babyLoveToken")},U=function(){return!!sessionStorage.getItem("babyLoveToken")},Q=function(){var t=l()(u()().mark(function e(){var n,m;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,G.Z.post(C.X2);case 2:return n=s.sent,m=n.data,s.abrupt("return",m?m.shoppingCartCode:null);case 5:case"end":return s.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),A=function(){var t=l()(u()().mark(function e(){var n;return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n=localStorage.getItem("babyloveShoppingCartCode"),n){p.next=5;break}return p.next=4,Q();case 4:n=p.sent;case 5:if(n){p.next=7;break}return p.abrupt("return",i.FN.show({icon:"fail",content:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"}));case 7:return localStorage.setItem("babyloveShoppingCartCode",n),p.abrupt("return",n);case 9:case"end":return p.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),o=function(e){e&&localStorage.setItem("babyloveShoppingCartCode",e)},P=function(e){e&&localStorage.setItem("babyloveAdminShoppingCartCode",e)},N=function(){return localStorage.getItem("babyloveAdminShoppingCartCode")},k=function(){localStorage.removeItem("babyloveAdminShoppingCartCode")},x=function(){var t=l()(u()().mark(function e(){var n,m;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,A();case 2:if(n=s.sent,m=y(n),!d){s.next=6;break}return s.abrupt("return",m.admin);case 6:return s.abrupt("return",m.custom);case 7:case"end":return s.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),j=function(e){if(!e)return!1;try{var n=document.createElement("input");return n.value=e,n.style.height=0,document.body.append(n),n.select(),document.execCommand("Copy"),n.remove(),!0}catch(m){return!1}}},57590:function(Z,D,r){r.r(D),r.d(D,{default:function(){return m}});var O=r(15009),u=r.n(O),b=r(97857),l=r.n(b),B=r(99289),G=r.n(B),y=r(12444),i=r.n(y),C=r(72004),d=r.n(C),R=r(25098),c=r.n(R),T=r(31996),E=r.n(T),$=r(26037),U=r.n($),Q=r(9783),A=r.n(Q),o=r(16763),P=r(67294),N=r(71167),k=r.n(N),x=r(40190),j=r(47866),t=r(42912),e=r(85893),n=function(p){E()(L,p);var s=U()(L);function L(M){var a;i()(this,L),a=s.call(this,M),A()(c()(a),"formRef",P.createRef()),A()(c()(a),"getGoodsDetails",G()(u()().mark(function V(){var I,f,h,S;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(a.goodsCode){v.next=2;break}return v.abrupt("return");case 2:return v.next=4,t.Z.get(j.ws,{params:{goodsCode:a.goodsCode}});case 4:I=v.sent,f=I.data,f&&(S=l()({},f),Array.isArray(f.pictures)&&(S.pictures=S.pictures.map(function(g){return l()(l()({},g),{},{url:g.pictureUrl})})),(h=a.formRef.current)===null||h===void 0||h.setFieldsValue(S));case 7:case"end":return v.stop()}},V)}))),A()(c()(a),"uploadImgFile",function(){var V=G()(u()().mark(function I(f){var h,S,F;return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return h=new FormData,h.append("files",f),g.next=4,t.Z.post(j.i4,h,{headers:{"Content-Type":"multipart/form-data"}});case 4:if(S=g.sent,F=S.data,!(F&&F[0])){g.next=10;break}return g.abrupt("return",{pictureCode:F[0].pictureCode,url:F[0].pictureUrl});case 10:return g.abrupt("return",{});case 11:case"end":return g.stop()}},I)}));return function(I){return V.apply(this,arguments)}}()),A()(c()(a),"save",G()(u()().mark(function V(){var I,f,h,S,F,v;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return f=(I=a.formRef.current)===null||I===void 0?void 0:I.getFieldsValue(),f.goodsPictureCodes=f.pictures.map(function(X){return X.pictureCode}),h=j.tz,a.goodsCode&&(f.goodsCode=a.goodsCode,h=j.aV),w.next=6,t.Z.post(h,f);case 6:S=w.sent,F=S.success,F&&(o.FN.show({content:"\u4FDD\u5B58\u6210\u529F",icon:"success"}),!a.goodsCode&&((v=a.formRef.current)===null||v===void 0||v.resetFields()));case 9:case"end":return w.stop()}},V)}))),a.state={};var z=new URLSearchParams(location.search);return a.goodsCode=z.get("goodsCode"),a}return d()(L,[{key:"componentDidMount",value:function(){this.getGoodsDetails()}},{key:"render",value:function(){var a=this.state.goodsDetails;return(0,e.jsx)("div",{className:"baby-love-goods-edit",children:(0,e.jsx)("div",{className:"baby-love-goods-edit-form",children:(0,e.jsxs)(o.l0,{ref:this.formRef,footer:(0,e.jsx)(o.zx,{block:!0,type:"submit",color:"primary",size:"large",onClick:this.save,children:"\u4FDD\u5B58"}),children:[(0,e.jsx)(o.l0.Item,{name:"goodsCatalog",label:"\u5546\u54C1\u5206\u7C7B",rules:[{required:!0,message:"\u5546\u54C1\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.XZ.Group,{children:(0,e.jsx)(o.XZ,{value:"CHILDREN_CLOTHING",children:"\u7AE5\u88C5"})})}),(0,e.jsx)(o.l0.Item,{name:"goodsTitle",label:"\u5546\u54C1\u6807\u9898",rules:[{required:!0,message:"\u5546\u54C1\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6807\u9898"})}),(0,e.jsx)(o.l0.Item,{name:"goodsSubtitle",label:"\u5546\u54C1\u526F\u6807\u9898",rules:[{required:!1,message:"\u5546\u54C1\u526F\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u526F\u6807\u9898"})}),(0,e.jsx)(o.l0.Item,{name:"pictures",label:"\u5546\u54C1\u56FE\u7247",rules:[{required:!0,message:"\u5546\u54C1\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.wA,{upload:this.uploadImgFile})}),(0,e.jsx)(o.l0.Item,{name:"goodsPrice",label:"\u5546\u54C1\u4EF7\u683C",rules:[{required:!0,message:"\u5546\u54C1\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u4EF7\u683C"})}),(0,e.jsx)(o.l0.Item,{name:"goodsInventory",label:"\u5546\u54C1\u5E93\u5B58",rules:[{required:!0,message:"\u5546\u54C1\u5E93\u5B58\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5E93\u5B58"})}),(0,e.jsx)(o.l0.Item,{name:"goodsDetails",label:"\u5546\u54C1\u8BE6\u60C5",rules:[{required:!1,message:"\u5546\u54C1\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(k(),{theme:"snow",value:a,onChange:this.setGoodsDetails})})]})})})}}]),L}(P.Component),m=n}}]);
