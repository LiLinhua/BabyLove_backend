"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[748],{77694:function(q,I,t){t.r(I),t.d(I,{default:function(){return Q}});var P=t(15009),C=t.n(P),E=t(99289),$=t.n(E),T=t(12444),y=t.n(T),A=t(72004),L=t.n(A),G=t(25098),h=t.n(G),z=t(31996),x=t.n(z),H=t(26037),O=t.n(H),M=t(9783),m=t.n(M),Y=t(27484),B=t.n(Y),j=t(67294),K=t(47866),F=t(42912),N=t(61544),c=t(12695),R=t(90336),b=t(92692),s=t(85893),Z=function(f){x()(d,f);var p=O()(d);function d(v){var e;return y()(this,d),e=p.call(this,v),m()(h()(e),"copyOrderNumber",function(){var r=e.props.orderItem;if((0,N.JG)(r.orderCode)){c.FN.show({icon:"success",content:"\u590D\u5236\u6210\u529F"});return}c.FN.show({icon:"fail",content:"\u590D\u5236\u5931\u8D25"})}),m()(h()(e),"lookLogistics",function(){var r=e.props.orderItem;if(!r.expressCode)return c.FN.show({icon:"fail",content:"\u6682\u65E0\u7269\u6D41\u4FE1\u606F"});if((0,N.JG)(r.expressCode)){c.FN.show({icon:"success",content:"\u7269\u6D41\u5355\u53F7\u5DF2\u590D\u5236\uFF0C\u8DF3\u8F6C\u67E5\u8BE2\u4E2D...",duration:2e3}),setTimeout(function(){window.open("https://m.kuaidi100.com/index.jsp")},2e3);return}c.FN.show({icon:"fail",content:"\u7269\u6D41\u5355\u53F7\u590D\u5236\u5931\u8D25"})}),m()(h()(e),"updateOrder",function(){(0,N.WF)("/order/edit?orderCode=".concat(e.props.orderItem.orderCode))}),m()(h()(e),"removeOrder",$()(C()().mark(function r(){var n,i,u,l;return C()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.Vq.confirm({content:"\u786E\u5B9A\u5220\u9664\u8BA2\u5355\u5417\uFF1F"});case 2:if(n=a.sent,n){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,F.Z.post(K.XZ,{orderCode:e.props.orderItem.orderCode});case 7:if(i=a.sent,u=i.success,l=i.message,u){a.next=13;break}return c.FN.show({icon:"fail",content:l||"\u5220\u9664\u5931\u8D25"}),a.abrupt("return");case 13:c.FN.show({icon:"success",content:"\u5220\u9664\u6210\u529F"}),e.props.getOrderList();case 15:case"end":return a.stop()}},r)}))),e}return L()(d,[{key:"render",value:function(){var e,r=this.props,n=r.orderItem,i=r.stopPropagation,u=[b.i.FINISHED.value,b.i.CANCELED.value].includes(n.status);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-list-item-header",children:[(0,s.jsxs)("span",{className:"baby-love-admin-order-list-item-header-left",children:[(0,s.jsx)("span",{className:"baby-love-admin-order-list-item-number",children:n.orderCode}),(0,s.jsx)("span",{className:"baby-love-admin-order-list-item-time",children:n.createdAt})]}),(0,s.jsx)("span",{className:"baby-love-admin-order-list-item-status",children:((e=b.i[n.status])===null||e===void 0?void 0:e.title)||"\u672A\u77E5"})]}),(0,s.jsx)("div",{className:"baby-love-admin-order-list-goods-picture",children:(0,s.jsx)("ul",{children:n.goods&&n.goods.map(function(l){var o,a,g;return(0,s.jsxs)("li",{children:[(0,s.jsx)("div",{className:"baby-love-admin-order-list-goods-picture-content",style:{backgroundImage:"url(".concat(((o=l.pictures)===null||o===void 0||(a=o[0])===null||a===void 0?void 0:a.pictureUrl)||R,")")}}),(0,s.jsx)(c.mH,{direction:"end",rows:1,content:l.goodsTitle}),(0,s.jsxs)("span",{className:"baby-love-admin-order-list-goods-count",children:["X",((g=l.ordersGoodsRelations)===null||g===void 0?void 0:g.buyCount)||"?"]})]},l.goodsCode)})})}),(0,s.jsxs)("div",{className:"baby-love-admin-order-list-item-footer",onClick:i,children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-list-item-price",children:[(0,s.jsx)("span",{className:"baby-love-admin-order-list-item-price-label",children:"\u5B9E\u4ED8\uFF1A"}),"\xA5",n.totalPrice]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-list-item-actions",children:[(0,s.jsx)(c.zx,{color:"primary",fill:"none",onClick:this.copyOrderNumber,children:"\u590D\u5236\u5355\u53F7"}),(0,s.jsx)(c.zx,{color:"primary",fill:"none",disabled:!n.expressCode,onClick:this.lookLogistics,children:"\u67E5\u770B\u7269\u6D41"}),(0,s.jsx)(c.zx,{color:"primary",disabled:u,fill:"none",onClick:this.updateOrder,children:"\u4FEE\u6539"}),(0,s.jsx)(c.zx,{color:"primary",fill:"none",onClick:this.removeOrder,children:"\u5220\u9664"})]})]})]})}}]),d}(j.Component),J=Z,U=function(f){x()(d,f);var p=O()(d);function d(v){var e;return y()(this,d),e=p.call(this,v),e.state={},e}return L()(d,[{key:"render",value:function(){var e=this.props,r=e.orderList,n=e.stopPropagation,i=e.toOrderDetails,u=e.isShowLoading,l=e.getOrderList;return u?(0,s.jsx)(c.k_,{color:"primary"}):r!=null&&r.length?(0,s.jsx)("ul",{className:"baby-love-admin-order-list-content",children:r.map(function(o){return(0,s.jsx)("li",{className:"baby-love-admin-order-list-item",onClick:function(){return i(o.orderCode)},children:(0,s.jsx)(J,{orderItem:o,stopPropagation:n,getOrderList:l})},o.orderCode)})}):(0,s.jsx)("p",{className:"baby-love-admin-order-list-empty",children:"\u6682\u65E0\u6570\u636E"})}}]),d}(j.Component),W=U,X=function(f){x()(d,f);var p=O()(d);function d(v){var e;return y()(this,d),e=p.call(this,v),m()(h()(e),"onInputChange",function(r,n){switch(e.props.onSearch(r,n),n){case"order":e.setState({orderKeyword:r,userKeyword:"",goodsKeyword:""});break;case"user":e.setState({userKeyword:r,goodsKeyword:""});break;case"goods":e.setState({goodsKeyword:r,userKeyword:""});break}}),e.state={orderKeyword:"",userKeyword:"",goodsKeyword:""},e}return L()(d,[{key:"render",value:function(){var e=this,r=this.state,n=r.orderKeyword,i=r.userKeyword,u=r.goodsKeyword;return(0,s.jsxs)("div",{className:"baby-love-admin-order-search",children:[(0,s.jsx)(c.E1,{value:n,placeholder:"\u8BA2\u5355\u53F7",onChange:function(o){return e.onInputChange(o,"order")}}),(0,s.jsx)(c.E1,{value:i,placeholder:"\u59D3\u540D",onChange:function(o){return e.onInputChange(o,"user")}}),(0,s.jsx)(c.E1,{value:u,placeholder:"\u5546\u54C1\u540D",onChange:function(o){return e.onInputChange(o,"goods")}})]})}}]),d}(j.Component),k=X,V=function(f){x()(d,f);var p=O()(d);function d(v){var e;return y()(this,d),e=p.call(this,v),m()(h()(e),"initData",$()(C()().mark(function r(){return C()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getOrderList();case 2:case"end":return i.stop()}},r)}))),m()(h()(e),"getOrderList",$()(C()().mark(function r(){var n,i,u;return C()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e.setState({isShowLoading:!0}),o.next=3,F.Z.post(K.Gs,{keyword:e.state.keyword});case 3:if(n=o.sent,i=n.data,!Array.isArray(i)){o.next=9;break}return u=i.map(function(a){return a.createdAt=B()(a.createdAt).format("YYYY-MM-DD HH:mm:ss"),a}),e.setState({showOrderList:u,orderList:u,isShowLoading:!1}),o.abrupt("return");case 9:e.setState({isShowLoading:!1});case 10:case"end":return o.stop()}},r)}))),m()(h()(e),"onSearch",function(r,n){clearTimeout(e.searchTimer),e.searchTimer=setTimeout(function(){switch(n){case"order":e.setState({keyword:r},e.getOrderList);break;case"user":e.setState({showOrderList:!r||!r.trim()?e.state.orderList:e.state.orderList.filter(function(i){var u,l,o,a,g,S,D,w;return((u=i.user)===null||u===void 0||(l=u.userName)===null||l===void 0?void 0:l.indexOf(r))>-1||((o=i.user)===null||o===void 0||(a=o.userNickname)===null||a===void 0?void 0:a.indexOf(r))>-1||((g=i.user)===null||g===void 0||(S=g.userPhone)===null||S===void 0?void 0:S.indexOf(r))>-1||((D=i.user)===null||D===void 0||(w=D.userCode)===null||w===void 0?void 0:w.indexOf(r))>-1})});break;case"goods":e.setState({showOrderList:!r||!r.trim()?e.state.orderList:e.state.orderList.filter(function(i){return Array.isArray(i.goods)?i.goods.find(function(u){var l,o;return((l=u.goodsTitle)===null||l===void 0?void 0:l.indexOf(r))>-1||((o=u.goodsCode)===null||o===void 0?void 0:o.indexOf(r))>-1}):!1})});break}},500)}),m()(h()(e),"toOrderDetails",function(r){(0,N.WF)("/order/details?orderCode="+r)}),m()(h()(e),"stopPropagation",function(r){r&&r.stopPropagation()}),e.state={orderList:[],showOrderList:[],keyword:"",isShowLoading:!1},e}return L()(d,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this.state,r=e.showOrderList,n=e.isShowLoading;return(0,s.jsxs)("div",{className:"baby-love-admin-order-list",children:[(0,s.jsx)(k,{onSearch:this.onSearch}),(0,s.jsx)(W,{orderList:r,stopPropagation:this.stopPropagation,toOrderDetails:this.toOrderDetails,isShowLoading:n,getOrderList:this.getOrderList})]})}}]),d}(j.Component),Q=V}}]);
