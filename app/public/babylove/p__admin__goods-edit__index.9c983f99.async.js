"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{47866:function(V,E,e){e.d(E,{Al:function(){return K},Bv:function(){return R},D2:function(){return w},DG:function(){return d},Dz:function(){return u},Gs:function(){return W},Ir:function(){return N},Lk:function(){return a},M1:function(){return c},OM:function(){return o},Pp:function(){return h},Qc:function(){return T},Qs:function(){return C},Uy:function(){return g},Vr:function(){return U},W3:function(){return n},X2:function(){return G},XZ:function(){return Q},Xh:function(){return O},aV:function(){return p},bp:function(){return r},c5:function(){return s},c9:function(){return b},cl:function(){return P},d0:function(){return f},f9:function(){return j},g7:function(){return k},gR:function(){return B},i4:function(){return t},i9:function(){return m},kL:function(){return Z},kP:function(){return M},mL:function(){return $},nc:function(){return A},o6:function(){return F},pV:function(){return y},re:function(){return v},rx:function(){return l},tz:function(){return i},ws:function(){return S},x4:function(){return x},xc:function(){return I},yV:function(){return L}});var i="/admin/goods/addGoods",p="/admin/goods/updateGoods",O="/admin/goods/removeGoods",t="/admin/goodsPictures/addGoodsPictures",A="/admin/shoppingCarts/addGoods",s="/admin/shoppingCarts/batchRemoveGoods",P="/admin/shoppingCarts/updateBuyCount",v="/admin/shoppingCarts/queryAllGoodsCount",D="/admin/shoppingCarts/addShoppingCart",m="/admin/goods/queryAllGoods",S="/admin/goods/queryGoodsDetails",U="/admin/shoppingCarts/queryAllShoppingCarts",T="/admin/shoppingCarts/queryAllGoods",M="/admin/shoppingCarts/batchUpdateSelected",W="/admin/orders/queryAllOrders",$="/admin/orders/queryOrderDetails",k="/admin/orders/addOrder",L="/admin/orders/updateOrderBaseInfo",u="/admin/orders/updateOrderGoodsBuyCount",j="/admin/orders/addOrderGoods",Q="/admin/orders/removeOrder",N="/admin/catalogs/queryAllCatalogs",Z="/admin/catalogs/createCatalog",F="/admin/catalogs/updateCatalog",o="/admin/catalogs/removeCatalog",r="/admin/users/queryAllUsers",n="/admin/users/addUser",g="/admin/users/updateUser",C="/admin/users/queryUserDetails",d="/admin/users/removeUser",B="/custom/shoppingCarts/queryAllGoods",K="/custom/shoppingCarts/updateBuyCount",a="/custom/goods/queryAllGoods",w="/custom/goods/queryGoodsDetails",G="/custom/shoppingCarts/addShoppingCart",f="/custom/shoppingCarts/addGoods",l="/custom/shoppingCarts/batchRemoveGoods",h="/custom/shoppingCarts/queryAllGoodsCount",c="/custom/shoppingCarts/batchUpdateSelected",I="/custom/orders/queryAllOrders",y="/custom/orders/queryOrderDetails",b="/custom/orders/cancelOrder",R="/custom/catalogs/queryAllCatalogs",x="/user/login",z="/user/logout"},12860:function(V,E,e){e.d(E,{T:function(){return p},x:function(){return O}});var i=e(61544),p=function(A){return[{title:"\u5F00\u5355",className:"baby-love-admin-home-item-open",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u7528\u6237",className:"baby-love-admin-home-item-users",onClick:function(){return(0,i.WF)("/user/list",!0)}},{title:"\u5546\u54C1",className:"baby-love-admin-home-item-goods",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269",className:"baby-love-admin-home-item-cart",onClick:function(){return(0,i.WF)("/shopping-cart?shoppingCartCode=".concat(A||""),!0)}},{title:"\u8BA2\u5355",className:"baby-love-admin-home-item-order",onClick:function(){return(0,i.WF)("/order/list",!0)}},{title:"\u5206\u7C7B",className:"baby-love-admin-home-item-catalog",onClick:function(){return(0,i.WF)("/catalog/list",!0)}}]},O=function(A){return{custom:[{title:"\u5546\u54C1",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return(0,i.WF)("/shopping-cart?shoppingCartCode=".concat(A||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return(0,i.WF)("/order/list?shoppingCartCode=".concat(A||""),!0)}}],admin:[{title:"\u5546\u54C1",onClick:function(){return(0,i.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return(0,i.WF)("/shopping-cart?shoppingCartCode=".concat(A||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return(0,i.WF)("/order/list",!0)}}]}}},42912:function(V,E,e){var i=e(6154),p=e(12695),O=e(61544),t=function(D){p.FN.show({icon:"fail",content:D||"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"})};function A(v){var D=v||{},m=D.data;return m?((!m||m.code!==200||!m.success)&&t(m.message||"\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.resolve(m)):(t("\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.reject(m))}function s(v){if(!window.navigator.onLine)return t("\u7F51\u7EDC\u5DF2\u65AD\u5F00"),Promise.reject(v.response||{});var D=v.response,m=D.status,S=D.data;if(m){switch(m){case 401:t((S==null?void 0:S.message)||"\u8BF7\u5148\u767B\u5F55"),(0,O.f9)(),(0,O.GL)();break;case 404:t("\u8BF7\u6C42\u4E0D\u5B58\u5728");break;default:t((S==null?void 0:S.message)||"\u8BF7\u6C42\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5")}return Promise.reject(v.response||{})}}var P=i.Z.create({timeout:12e3});P.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",P.interceptors.request.use(function(v){return v},function(v){return Promise.error(v)}),P.interceptors.response.use(A,s),E.Z=P},61544:function(V,E,e){e.d(E,{F3:function(){return N},GJ:function(){return m},GL:function(){return T},JG:function(){return F},Te:function(){return u},V2:function(){return M},WF:function(){return U},YX:function(){return L},f9:function(){return W},hf:function(){return j},on:function(){return Q},xE:function(){return Z},y7:function(){return $},yV:function(){return S}});var i=e(15009),p=e.n(i),O=e(99289),t=e.n(O),A=e(82188),s=e(42912),P=e(12860),v=e(12695),D=e(47866),m=location.pathname.startsWith("/view/admin"),S=function(){return["/view/admin/login","/view/custom/login","/view/login"].includes(location.pathname)},U=function(r,n,g){r&&(g||(location.pathname.startsWith("/view/admin")?r="/view/admin".concat(r):r="/view".concat(r)),n?location.href=r:A.m8.push(r))},T=function(){U("/login?callback=".concat(encodeURIComponent(location.href)),!0)},M=function(){sessionStorage.setItem("babyLoveToken","1")},W=function(){sessionStorage.removeItem("babyLoveToken")},$=function(){return!!sessionStorage.getItem("babyLoveToken")},k=function(){var o=t()(p()().mark(function r(){var n,g;return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,s.Z.post(D.X2);case 2:return n=d.sent,g=n.data,d.abrupt("return",g?g.shoppingCartCode:null);case 5:case"end":return d.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),L=function(){var o=t()(p()().mark(function r(){var n;return p()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(n=localStorage.getItem("babyloveShoppingCartCode"),n){C.next=5;break}return C.next=4,k();case 4:n=C.sent;case 5:if(n){C.next=7;break}return C.abrupt("return",v.FN.show({icon:"fail",content:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"}));case 7:return localStorage.setItem("babyloveShoppingCartCode",n),C.abrupt("return",n);case 9:case"end":return C.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),u=function(r){r&&localStorage.setItem("babyloveShoppingCartCode",r)},j=function(r){r&&localStorage.setItem("babyloveAdminShoppingCartCode",r)},Q=function(){return localStorage.getItem("babyloveAdminShoppingCartCode")},N=function(){localStorage.removeItem("babyloveAdminShoppingCartCode")},Z=function(){var o=t()(p()().mark(function r(){var n,g;return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,L();case 2:if(n=d.sent,g=(0,P.x)(n),!m){d.next=6;break}return d.abrupt("return",g.admin);case 6:return d.abrupt("return",g.custom);case 7:case"end":return d.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),F=function(r){if(!r)return!1;try{var n=document.createElement("input");return n.value=r,n.style.height=0,document.body.append(n),n.select(),document.execCommand("Copy"),n.remove(),!0}catch(g){return!1}}},57590:function(V,E,e){e.r(E),e.d(E,{default:function(){return g}});var i=e(97857),p=e.n(i),O=e(15009),t=e.n(O),A=e(99289),s=e.n(A),P=e(12444),v=e.n(P),D=e(72004),m=e.n(D),S=e(25098),U=e.n(S),T=e(31996),M=e.n(T),W=e(26037),$=e.n(W),k=e(9783),L=e.n(k),u=e(12695),j=e(67294),Q=e(71167),N=e.n(Q),Z=e(40190),F=e(47866),o=e(42912),r=e(85893),n=function(C){M()(B,C);var d=$()(B);function B(K){var a;v()(this,B),a=d.call(this,K),L()(U()(a),"formRef",j.createRef()),L()(U()(a),"getCatalogList",s()(t()().mark(function G(){var f,l;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,o.Z.post(F.Ir);case 2:f=c.sent,l=f.data,Array.isArray(l)&&a.setState({catalogList:l});case 5:case"end":return c.stop()}},G)}))),L()(U()(a),"getGoodsDetails",s()(t()().mark(function G(){var f,l,h,c;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(a.goodsCode){y.next=2;break}return y.abrupt("return");case 2:return y.next=4,o.Z.get(F.ws,{params:{goodsCode:a.goodsCode}});case 4:f=y.sent,l=f.data,l&&(c=p()({},l),Array.isArray(l.pictures)&&(c.pictures=c.pictures.map(function(b){return p()(p()({},b),{},{url:b.pictureUrl})})),(h=a.formRef.current)===null||h===void 0||h.setFieldsValue(c));case 7:case"end":return y.stop()}},G)}))),L()(U()(a),"uploadImgFile",function(){var G=s()(t()().mark(function f(l){var h,c,I;return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return h=new FormData,h.append("files",l),b.next=4,o.Z.post(F.i4,h,{headers:{"Content-Type":"multipart/form-data"}});case 4:if(c=b.sent,I=c.data,!(I&&I[0])){b.next=10;break}return b.abrupt("return",{pictureCode:I[0].pictureCode,url:I[0].pictureUrl});case 10:return b.abrupt("return",{});case 11:case"end":return b.stop()}},f)}));return function(f){return G.apply(this,arguments)}}()),L()(U()(a),"save",s()(t()().mark(function G(){var f,l,h,c,I,y;return t()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return l=(f=a.formRef.current)===null||f===void 0?void 0:f.getFieldsValue(),l.goodsPictureCodes=l.pictures.map(function(x){return x.pictureCode}),h=F.tz,a.goodsCode&&(l.goodsCode=a.goodsCode,h=F.aV),R.next=6,o.Z.post(h,l);case 6:c=R.sent,I=c.success,I&&(u.FN.show({content:"\u4FDD\u5B58\u6210\u529F",icon:"success"}),!a.goodsCode&&((y=a.formRef.current)===null||y===void 0||y.resetFields()));case 9:case"end":return R.stop()}},G)}))),a.state={catalogList:[]};var w=new URLSearchParams(location.search);return a.goodsCode=w.get("goodsCode"),a}return m()(B,[{key:"componentDidMount",value:function(){this.getCatalogList(),this.getGoodsDetails()}},{key:"render",value:function(){var a=this.state,w=a.goodsDetails,G=a.catalogList;return(0,r.jsx)("div",{className:"baby-love-goods-edit",children:(0,r.jsx)("div",{className:"baby-love-goods-edit-form",children:(0,r.jsxs)(u.l0,{ref:this.formRef,footer:(0,r.jsx)(u.zx,{block:!0,type:"submit",color:"primary",size:"large",onClick:this.save,children:"\u4FDD\u5B58"}),children:[(0,r.jsx)(u.l0.Item,{name:"goodsCatalog",label:"\u5546\u54C1\u5206\u7C7B",rules:[{required:!0,message:"\u5546\u54C1\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(u.Y8.Group,{children:G.map(function(f){return(0,r.jsx)(u.Y8,{value:f.catalogCode,children:f.catalogName})})})}),(0,r.jsx)(u.l0.Item,{name:"goodsTitle",label:"\u5546\u54C1\u6807\u9898",rules:[{required:!0,message:"\u5546\u54C1\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(u.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6807\u9898"})}),(0,r.jsx)(u.l0.Item,{name:"goodsSubtitle",label:"\u5546\u54C1\u526F\u6807\u9898",rules:[{required:!1,message:"\u5546\u54C1\u526F\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(u.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u526F\u6807\u9898"})}),(0,r.jsx)(u.l0.Item,{name:"pictures",label:"\u5546\u54C1\u56FE\u7247",rules:[{required:!0,message:"\u5546\u54C1\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(u.wA,{upload:this.uploadImgFile})}),(0,r.jsx)(u.l0.Item,{name:"goodsPrice",label:"\u5546\u54C1\u4EF7\u683C",rules:[{required:!0,message:"\u5546\u54C1\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(u.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u4EF7\u683C"})}),(0,r.jsx)(u.l0.Item,{name:"goodsInventory",label:"\u5546\u54C1\u5E93\u5B58",rules:[{required:!0,message:"\u5546\u54C1\u5E93\u5B58\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(u.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5E93\u5B58"})}),(0,r.jsx)(u.l0.Item,{name:"goodsDetails",label:"\u5546\u54C1\u8BE6\u60C5",rules:[{required:!1,message:"\u5546\u54C1\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(N(),{theme:"snow",value:w,onChange:this.setGoodsDetails})})]})})})}}]),B}(j.Component),g=n}}]);
