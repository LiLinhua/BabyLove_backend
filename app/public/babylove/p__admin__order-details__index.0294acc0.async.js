"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[741],{89774:function(_,A,a){a.r(A),a.d(A,{default:function(){return X}});var L=a(15009),F=a.n(L),B=a(99289),D=a.n(B),$=a(12444),C=a.n($),G=a(72004),j=a.n(G),I=a(25098),p=a.n(I),P=a(31996),y=a.n(P),z=a(26037),g=a.n(z),T=a(9783),f=a.n(T),u=a(12695),W=a(27484),H=a.n(W),b=a(67294),E=a(47866),O=a(42912),N=a(61544),x=a(92692),s=a(85893),R=function(h){y()(r,h);var m=g()(r);function r(i){var e;return C()(this,r),e=m.call(this,i),f()(p()(e),"cancelOrder",D()(F()().mark(function n(){var l,c,o,v;return F()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.Vq.confirm({content:"\u786E\u5B9A\u53D6\u6D88\u8BA2\u5355\u5417\uFF1F"});case 2:if(l=t.sent,l){t.next=5;break}return t.abrupt("return");case 5:return e.setState({isCanceling:!0}),t.next=8,O.Z.post(E.yV,{orderCode:e.props.orderCode,orderStatus:x.i.CANCELED.value});case 8:c=t.sent,o=c.success,v=c.message,o?(u.FN.show({content:"\u53D6\u6D88\u6210\u529F",icon:"success"}),e.props.flushOrderDetails()):u.FN.show({content:v||"\u53D6\u6D88\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"fail"}),e.setState({isCanceling:!1});case 13:case"end":return t.stop()}},n)}))),f()(p()(e),"toEditOrder",function(){(0,N.WF)("/order/edit?orderCode=".concat(e.props.orderCode))}),f()(p()(e),"lookLogistics",function(){if((0,N.JG)(e.props.expressCode)){u.FN.show({icon:"success",content:"\u7269\u6D41\u5355\u53F7\u5DF2\u590D\u5236\uFF0C\u8DF3\u8F6C\u67E5\u8BE2\u4E2D...",duration:2e3}),setTimeout(function(){window.open("https://m.kuaidi100.com/index.jsp")},2e3);return}u.FN.show({icon:"fail",content:"\u7269\u6D41\u5355\u53F7\u590D\u5236\u5931\u8D25"})}),e.state={isCanceling:!1},e}return j()(r,[{key:"render",value:function(){var e=[x.i.WAIT_GET.value,x.i.FINISHED.value,x.i.CANCELED.value].includes(this.props.orderStatus),n=[x.i.FINISHED.value,x.i.CANCELED.value].includes(this.props.orderStatus);return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-actions",children:[(0,s.jsx)(u.zx,{color:"primary",size:"small",disabled:n,onClick:this.cancelOrder,loading:this.state.isCanceling,children:"\u53D6\u6D88\u8BA2\u5355"}),(0,s.jsx)(u.zx,{color:"primary",size:"small",disabled:e,onClick:this.toEditOrder,children:"\u4FEE\u6539\u8BA2\u5355"}),(0,s.jsx)(u.zx,{color:"primary",size:"small",disabled:!this.props.expressCode,onClick:this.lookLogistics,children:"\u67E5\u8BE2\u7269\u6D41"})]})}}]),r}(b.Component),k=R,M=function(h){y()(r,h);var m=g()(r);function r(i){var e;return C()(this,r),e=m.call(this,i),f()(p()(e),"copyExpressCode",function(){var n=(0,N.JG)(e.props.expressCode);n?u.FN.show({content:"\u590D\u5236\u6210\u529F",icon:"success"}):u.FN.show({content:"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",icon:"fail"})}),e.state={},e}return j()(r,[{key:"render",value:function(){var e=this.props,n=e.orderCode,l=e.createdAt,c=e.totalPrice,o=e.expressWay,v=e.expressCode,d=e.expressAddress,t=e.user;return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info",children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u8BA2\u5355\u7F16\u53F7\uFF1A"}),(0,s.jsx)("span",{children:n})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u8BA2\u5355\u65F6\u95F4\uFF1A"}),(0,s.jsx)("span",{children:l})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u8BA2\u5355\u603B\u4EF7\uFF1A"}),(0,s.jsxs)("span",{children:["\xA5",c]})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u5173\u8054\u7528\u6237\uFF1A"}),(0,s.jsx)("span",{children:(0,s.jsx)(u.mH,{direction:"end",rows:1,content:t?"".concat(t.userName,"(").concat(t.userNickname||t.userCode,")"):"-"})})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u914D\u9001\u65B9\u5F0F\uFF1A"}),(0,s.jsx)("span",{children:o||"-"})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u5FEB\u9012\u5355\u53F7\uFF1A"}),(0,s.jsx)("span",{children:v||"-"}),v&&(0,s.jsx)(u.zx,{color:"primary",disabled:!v,fill:"none",onClick:v?this.copyExpressCode:null,children:"\u590D\u5236\u5FEB\u9012\u5355\u53F7"})]}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,s.jsx)("span",{children:"\u914D\u9001\u5730\u5740\uFF1A"}),(0,s.jsx)("span",{children:d||"-"})]})]})}}]),r}(b.Component),Y=M,U=a(90336),J=function(h){y()(r,h);var m=g()(r);function r(i){var e;return C()(this,r),e=m.call(this,i),f()(p()(e),"toGoodsDetail",function(n){(0,N.WF)("/goods/details?goodsCode=".concat(n))}),e.state={},e}return j()(r,[{key:"render",value:function(){var e=this,n=this.props,l=n.goods,c=n.totalCount;return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods",children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods-header",children:[(0,s.jsx)("span",{className:"baby-love-admin-order-details-goods-total-shop",children:"BabyLove"}),(0,s.jsxs)("span",{className:"baby-love-admin-order-details-goods-total-count",children:["\u5171 ",c," \u4EF6\u5546\u54C1"]})]}),(0,s.jsx)("ul",{children:(l||[]).map(function(o){var v,d,t;return(0,s.jsxs)("li",{onClick:function(){return e.toGoodsDetail(o.goodsCode)},children:[(0,s.jsx)("div",{className:"baby-love-admin-order-details-goods-picture",style:{backgroundImage:"url(".concat(((v=o.pictures)===null||v===void 0||(d=v[0])===null||d===void 0?void 0:d.pictureUrl)||U,")")}}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods-info",children:[(0,s.jsx)("div",{className:"baby-love-admin-order-details-goods-title",children:(0,s.jsx)(u.mH,{direction:"end",rows:2,content:o.goodsTitle})}),(0,s.jsxs)("div",{className:"baby-love-admin-order-details-goods-details",children:[(0,s.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-price",children:["\xA5 ",o.goodsPrice]}),(0,s.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-count",children:["x",((t=o.ordersGoodsRelations)===null||t===void 0?void 0:t.buyCount)||"?"]})]})]})]},o)})})]})}}]),r}(b.Component),V=J,Z=function(h){y()(r,h);var m=g()(r);function r(i){var e;return C()(this,r),e=m.call(this,i),e.state={},e}return j()(r,[{key:"render",value:function(){var e=x.i[this.props.orderStatus]||{},n=e.icon,l=e.title,c=e.backgroundColor;return(0,s.jsxs)("div",{className:"baby-love-admin-order-details-status",style:{backgroundColor:c},children:[n,(0,s.jsx)("span",{children:l})]})}}]),r}(b.Component),K=Z,Q=function(h){y()(r,h);var m=g()(r);function r(i){var e;C()(this,r),e=m.call(this,i),f()(p()(e),"setLoading",function(l){e.setState({isShowLoading:l})}),f()(p()(e),"getOrderDetails",D()(F()().mark(function l(){var c,o;return F()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(e.orderCode){d.next=2;break}return d.abrupt("return");case 2:return e.setLoading(!0),d.next=5,O.Z.post(E.mL,{orderCode:e.orderCode});case 5:c=d.sent,o=c.data,o&&(o.createdAt=H()(o.createdAt).format("YYYY-MM-DD HH:mm:ss"),e.setState({orderDetails:o})),e.setLoading(!1);case 9:case"end":return d.stop()}},l)}))),e.state={orderDetails:{},isShowLoading:!1};var n=new URLSearchParams(location.search);return e.orderCode=n.get("orderCode"),e}return j()(r,[{key:"componentDidMount",value:function(){this.getOrderDetails()}},{key:"render",value:function(){var e=this.state.orderDetails||{},n=e.status,l=e.orderCode,c=e.expressWay,o=e.expressCode,v=e.expressAddress,d=e.totalPrice,t=e.createdAt,S=e.goods,w=e.totalCount,q=e.user;return(0,s.jsx)("div",{className:"baby-love-admin-order-details",children:this.state.isShowLoading?(0,s.jsx)(u.k_,{color:"primary"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"baby-love-admin-order-details-info",children:[(0,s.jsx)(K,{orderStatus:n}),(0,s.jsx)(Y,{orderCode:l,createdAt:t,expressWay:c,expressCode:o,expressAddress:v,totalPrice:d,user:q}),(0,s.jsx)(V,{goods:S,totalCount:w})]}),(0,s.jsx)(k,{orderCode:l,orderStatus:n,expressCode:o,flushOrderDetails:this.getOrderDetails})]})})}}]),r}(b.Component),X=Q}}]);
