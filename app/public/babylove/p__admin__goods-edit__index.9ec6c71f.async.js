"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{47866:function(x,D,r){r.d(D,{Al:function(){return w},D2:function(){return t},Dz:function(){return o},Gs:function(){return U},Lk:function(){return O},M1:function(){return s},Pp:function(){return p},Qc:function(){return E},Vr:function(){return c},X2:function(){return e},XZ:function(){return N},Xh:function(){return b},aV:function(){return u},c5:function(){return G},c9:function(){return a},cl:function(){return y},d0:function(){return n},f9:function(){return P},g7:function(){return k},gR:function(){return V},i4:function(){return l},i9:function(){return d},kP:function(){return $},mL:function(){return Q},nc:function(){return R},pV:function(){return M},re:function(){return i},rx:function(){return m},tz:function(){return j},ws:function(){return B},x4:function(){return z},xc:function(){return L},yV:function(){return A}});var j="/admin/goods/addGoods",u="/admin/goods/updateGoods",b="/admin/goods/removeGoods",l="/admin/goodsPictures/addGoodsPictures",R="/admin/shoppingCarts/addGoods",G="/admin/shoppingCarts/batchRemoveGoods",y="/admin/shoppingCarts/updateBuyCount",i="/admin/shoppingCarts/queryAllGoodsCount",h="/admin/shoppingCarts/addShoppingCart",d="/admin/goods/queryAllGoods",B="/admin/goods/queryGoodsDetails",c="/admin/shoppingCarts/queryAllShoppingCarts",E="/admin/shoppingCarts/queryAllGoods",$="/admin/shoppingCarts/batchUpdateSelected",U="/admin/orders/queryAllOrders",Q="/admin/orders/queryOrderDetails",k="/admin/orders/addOrder",A="/admin/orders/updateOrderBaseInfo",o="/admin/orders/updateOrderGoodsBuyCount",P="/admin/orders/addOrderGoods",N="/admin/orders/removeOrder",V="/custom/shoppingCarts/queryAllGoods",w="/custom/shoppingCarts/updateBuyCount",O="/custom/goods/queryAllGoods",t="/custom/goods/queryGoodsDetails",e="/custom/shoppingCarts/addShoppingCart",n="/custom/shoppingCarts/addGoods",m="/custom/shoppingCarts/batchRemoveGoods",p="/custom/shoppingCarts/queryAllGoodsCount",s="/custom/shoppingCarts/batchUpdateSelected",L="/custom/orders/queryAllOrders",M="/custom/orders/queryOrderDetails",a="/custom/orders/cancelOrder",z="/user/login",T="/user/logout"},42912:function(x,D,r){var j=r(6154),u=r(16763),b=r(82405),l=function(h){u.FN.show({icon:"fail",content:h||"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"})};function R(i){console.log("===========http===========",i);var h=i||{},d=h.data;return d?((!d||d.code!==200||!d.success)&&l(d.message||"\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.resolve(d)):(l("\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.reject(d))}function G(i){if(!window.navigator.onLine)return l("\u7F51\u7EDC\u5DF2\u65AD\u5F00"),Promise.reject(i.response||{});var h=i.response,d=h.status,B=h.data;if(d){switch(d){case 401:l("\u8BF7\u5148\u767B\u5F55"),(0,b.f9)(),(0,b.GL)();break;case 404:l("\u8BF7\u6C42\u4E0D\u5B58\u5728");break;default:l(B.message||"\u8BF7\u6C42\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5")}return Promise.reject(i.response||{})}}var y=j.Z.create({timeout:12e3});y.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",y.interceptors.request.use(function(i){return i},function(i){return Promise.error(i)}),y.interceptors.response.use(R,G),D.Z=y},82405:function(x,D,r){r.d(D,{y7:function(){return Q},yV:function(){return B},JG:function(){return O},on:function(){return N},xE:function(){return w},YX:function(){return A},WF:function(){return c},GJ:function(){return d},F3:function(){return V},f9:function(){return U},hf:function(){return P},V2:function(){return $},Te:function(){return o},GL:function(){return E}});var j=r(15009),u=r.n(j),b=r(99289),l=r.n(b),R=r(82188),G=r(42912),y=function(e){return{custom:[{title:"\u5546\u54C1",onClick:function(){return c("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return c("/shopping-cart?shoppingCartCode=".concat(e||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return c("/order/list?shoppingCartCode=".concat(e||""),!0)}}],admin:[{title:"\u5546\u54C1",onClick:function(){return c("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return c("/shopping-cart?shoppingCartCode=".concat(e||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return c("/order/list",!0)}}]}},i=r(16763),h=r(47866),d=location.pathname.startsWith("/view/admin"),B=function(){return["/view/admin/login","/view/custom/login","/view/login"].includes(location.pathname)},c=function(e,n,m){e&&(m||(location.pathname.startsWith("/view/admin/")?e="/view/admin".concat(e):e="/view".concat(e)),n?location.href=e:R.m8.push(e))},E=function(){c("/login?callback=".concat(location.pathname),!0)},$=function(){sessionStorage.setItem("babyLoveToken","1")},U=function(){sessionStorage.removeItem("babyLoveToken")},Q=function(){return!!sessionStorage.getItem("babyLoveToken")},k=function(){var t=l()(u()().mark(function e(){var n,m;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,G.Z.post(h.X2);case 2:return n=s.sent,m=n.data,s.abrupt("return",m?m.shoppingCartCode:null);case 5:case"end":return s.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),A=function(){var t=l()(u()().mark(function e(){var n;return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n=localStorage.getItem("babyloveShoppingCartCode"),n){p.next=5;break}return p.next=4,k();case 4:n=p.sent;case 5:if(n){p.next=7;break}return p.abrupt("return",i.FN.show({icon:"fail",content:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"}));case 7:return localStorage.setItem("babyloveShoppingCartCode",n),p.abrupt("return",n);case 9:case"end":return p.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),o=function(e){e&&localStorage.setItem("babyloveShoppingCartCode",e)},P=function(e){e&&localStorage.setItem("babyloveAdminShoppingCartCode",e)},N=function(){return localStorage.getItem("babyloveAdminShoppingCartCode")},V=function(){localStorage.removeItem("babyloveAdminShoppingCartCode")},w=function(){var t=l()(u()().mark(function e(){var n,m;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,A();case 2:if(n=s.sent,m=y(n),!d){s.next=6;break}return s.abrupt("return",m.admin);case 6:return s.abrupt("return",m.custom);case 7:case"end":return s.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),O=function(e){if(!e)return!1;try{var n=document.createElement("input");return n.value=e,n.style.height=0,document.body.append(n),n.select(),document.execCommand("Copy"),n.remove(),!0}catch(m){return!1}}},57590:function(x,D,r){r.r(D),r.d(D,{default:function(){return m}});var j=r(15009),u=r.n(j),b=r(97857),l=r.n(b),R=r(99289),G=r.n(R),y=r(12444),i=r.n(y),h=r(72004),d=r.n(h),B=r(25098),c=r.n(B),E=r(31996),$=r.n(E),U=r(26037),Q=r.n(U),k=r(9783),A=r.n(k),o=r(16763),P=r(67294),N=r(71167),V=r.n(N),w=r(40190),O=r(47866),t=r(42912),e=r(85893),n=function(p){$()(L,p);var s=Q()(L);function L(M){var a;i()(this,L),a=s.call(this,M),A()(c()(a),"formRef",P.createRef()),A()(c()(a),"getGoodsDetails",G()(u()().mark(function T(){var I,f,C,S;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(a.goodsCode){v.next=2;break}return v.abrupt("return");case 2:return v.next=4,t.Z.get(O.ws,{params:{goodsCode:a.goodsCode}});case 4:I=v.sent,f=I.data,f&&(S=l()({},f),Array.isArray(f.pictures)&&(S.pictures=S.pictures.map(function(g){return l()(l()({},g),{},{url:g.pictureUrl})})),(C=a.formRef.current)===null||C===void 0||C.setFieldsValue(S));case 7:case"end":return v.stop()}},T)}))),A()(c()(a),"uploadImgFile",function(){var T=G()(u()().mark(function I(f){var C,S,F;return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return C=new FormData,C.append("files",f),g.next=4,t.Z.post(O.i4,C,{headers:{"Content-Type":"multipart/form-data"}});case 4:if(S=g.sent,F=S.data,!(F&&F[0])){g.next=10;break}return g.abrupt("return",{pictureCode:F[0].pictureCode,url:F[0].pictureUrl});case 10:return g.abrupt("return",{});case 11:case"end":return g.stop()}},I)}));return function(I){return T.apply(this,arguments)}}()),A()(c()(a),"save",G()(u()().mark(function T(){var I,f,C,S,F,v;return u()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return f=(I=a.formRef.current)===null||I===void 0?void 0:I.getFieldsValue(),f.goodsPictureCodes=f.pictures.map(function(X){return X.pictureCode}),C=O.tz,a.goodsCode&&(f.goodsCode=a.goodsCode,C=O.aV),Z.next=6,t.Z.post(C,f);case 6:S=Z.sent,F=S.success,F&&(o.FN.show({content:"\u4FDD\u5B58\u6210\u529F",icon:"success"}),!a.goodsCode&&((v=a.formRef.current)===null||v===void 0||v.resetFields()));case 9:case"end":return Z.stop()}},T)}))),a.state={};var z=new URLSearchParams(location.search);return a.goodsCode=z.get("goodsCode"),a}return d()(L,[{key:"componentDidMount",value:function(){this.getGoodsDetails()}},{key:"render",value:function(){var a=this.state.goodsDetails;return(0,e.jsx)("div",{className:"baby-love-goods-edit",children:(0,e.jsx)("div",{className:"baby-love-goods-edit-form",children:(0,e.jsxs)(o.l0,{ref:this.formRef,footer:(0,e.jsx)(o.zx,{block:!0,type:"submit",color:"primary",size:"large",onClick:this.save,children:"\u4FDD\u5B58"}),children:[(0,e.jsx)(o.l0.Item,{name:"goodsCatalog",label:"\u5546\u54C1\u5206\u7C7B",rules:[{required:!0,message:"\u5546\u54C1\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.XZ.Group,{children:(0,e.jsx)(o.XZ,{value:"CHILDREN_CLOTHING",children:"\u7AE5\u88C5"})})}),(0,e.jsx)(o.l0.Item,{name:"goodsTitle",label:"\u5546\u54C1\u6807\u9898",rules:[{required:!0,message:"\u5546\u54C1\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6807\u9898"})}),(0,e.jsx)(o.l0.Item,{name:"goodsSubtitle",label:"\u5546\u54C1\u526F\u6807\u9898",rules:[{required:!1,message:"\u5546\u54C1\u526F\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u526F\u6807\u9898"})}),(0,e.jsx)(o.l0.Item,{name:"pictures",label:"\u5546\u54C1\u56FE\u7247",rules:[{required:!0,message:"\u5546\u54C1\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.wA,{upload:this.uploadImgFile})}),(0,e.jsx)(o.l0.Item,{name:"goodsPrice",label:"\u5546\u54C1\u4EF7\u683C",rules:[{required:!0,message:"\u5546\u54C1\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u4EF7\u683C"})}),(0,e.jsx)(o.l0.Item,{name:"goodsInventory",label:"\u5546\u54C1\u5E93\u5B58",rules:[{required:!0,message:"\u5546\u54C1\u5E93\u5B58\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(o.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5E93\u5B58"})}),(0,e.jsx)(o.l0.Item,{name:"goodsDetails",label:"\u5546\u54C1\u8BE6\u60C5",rules:[{required:!1,message:"\u5546\u54C1\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,e.jsx)(V(),{theme:"snow",value:a,onChange:this.setGoodsDetails})})]})})})}}]),L}(P.Component),m=n}}]);
