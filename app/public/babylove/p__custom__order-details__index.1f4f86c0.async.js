"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[659],{28466:function(w,N,o){o.r(N),o.d(N,{default:function(){return Q}});var P=o(15009),F=o.n(P),B=o(99289),A=o.n(B),$=o(12444),g=o.n($),G=o(72004),y=o.n(G),E=o(25098),m=o.n(E),L=o(31996),j=o.n(L),z=o(26037),x=o.n(z),R=o(9783),f=o.n(R),l=o(12695),T=o(27484),W=o.n(T),b=o(67294),D=o(47866),C=o(61544),O=o(42912),Y=o(92692),e=o(85893),I=function(h){j()(r,h);var p=x()(r);function r(c){var s;return g()(this,r),s=p.call(this,c),f()(m()(s),"cancelOrder",A()(F()().mark(function i(){var d,u,n,v;return F()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Vq.confirm({content:"\u786E\u5B9A\u53D6\u6D88\u8BA2\u5355\u5417\uFF1F"});case 2:if(d=t.sent,d){t.next=5;break}return t.abrupt("return");case 5:return s.setState({isCanceling:!0}),t.t0=O.Z,t.t1=D.c9,t.t2=s.props.orderCode,t.next=11,(0,C.YX)();case 11:return t.t3=t.sent,t.t4={orderCode:t.t2,shoppingCartCode:t.t3},t.next=15,t.t0.post.call(t.t0,t.t1,t.t4);case 15:u=t.sent,n=u.success,v=u.message,n?(l.FN.show({content:"\u53D6\u6D88\u6210\u529F",icon:"success"}),s.props.flushOrderDetails()):l.FN.show({content:v||"\u53D6\u6D88\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"fail"}),s.setState({isCanceling:!1});case 20:case"end":return t.stop()}},i)}))),f()(m()(s),"lookLogistics",function(){if((0,C.JG)(s.props.orderCode)){l.FN.show({icon:"success",content:"\u7269\u6D41\u5355\u53F7\u5DF2\u590D\u5236\uFF0C\u8DF3\u8F6C\u67E5\u8BE2\u4E2D...",duration:2e3}),setTimeout(function(){window.open("https://m.kuaidi100.com/index.jsp")},2e3);return}l.FN.show({icon:"fail",content:"\u7269\u6D41\u5355\u53F7\u590D\u5236\u5931\u8D25"})}),f()(m()(s),"connectPostSale",function(){l.Vq.confirm({image:"/public/pictures/WX20230519-011105.png",title:"\u957F\u6309\u4FDD\u5B58\u56FE\u7247\u6DFB\u52A0\u552E\u540E\u5BA2\u670D\u5FAE\u4FE1",confirmText:"\u590D\u5236\u5355\u53F7",onConfirm:function(){var d=(0,C.JG)(s.props.orderCode);d?l.FN.show({content:"\u590D\u5236\u6210\u529F",icon:"success"}):l.FN.show({content:"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",icon:"fail"})}})}),s.state={isCanceling:!1},s}return y()(r,[{key:"render",value:function(){return(0,e.jsxs)("div",{className:"baby-love-custom-order-details-actions",children:[this.props.expressCode?(0,e.jsx)(l.zx,{color:"primary",size:"small",disabled:!this.props.expressCode,onClick:this.lookLogistics,children:"\u67E5\u8BE2\u7269\u6D41"}):null,(0,e.jsx)(l.zx,{color:"primary",size:"small",onClick:this.connectPostSale,children:"\u8054\u7CFB\u552E\u540E"})]})}}]),r}(b.Component),M=I,H=function(h){j()(r,h);var p=x()(r);function r(c){var s;return g()(this,r),s=p.call(this,c),f()(m()(s),"copyExpressCode",function(){var i=(0,C.JG)(s.props.expressCode);i?l.FN.show({content:"\u590D\u5236\u6210\u529F",icon:"success"}):l.FN.show({content:"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",icon:"fail"})}),s.state={},s}return y()(r,[{key:"render",value:function(){var s=this.props,i=s.orderCode,d=s.createdAt,u=s.totalPrice,n=s.expressWay,v=s.expressCode;return(0,e.jsxs)("div",{className:"baby-love-custom-order-details-base-info",children:[(0,e.jsxs)("div",{className:"baby-love-custom-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u8BA2\u5355\u7F16\u53F7\uFF1A"}),(0,e.jsx)("span",{children:i})]}),(0,e.jsxs)("div",{className:"baby-love-custom-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u8BA2\u5355\u65F6\u95F4\uFF1A"}),(0,e.jsx)("span",{children:d})]}),(0,e.jsxs)("div",{className:"baby-love-custom-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u8BA2\u5355\u603B\u4EF7\uFF1A"}),(0,e.jsxs)("span",{children:["\xA5",u]})]}),(0,e.jsxs)("div",{className:"baby-love-custom-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u914D\u9001\u65B9\u5F0F\uFF1A"}),(0,e.jsx)("span",{children:n||"-"})]}),(0,e.jsxs)("div",{className:"baby-love-custom-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u5FEB\u9012\u5355\u53F7\uFF1A"}),(0,e.jsx)("span",{children:v||"-"}),v&&(0,e.jsx)(l.zx,{color:"primary",disabled:!v,fill:"none",onClick:v?this.copyExpressCode:null,children:"\u590D\u5236\u5FEB\u9012\u5355\u53F7"})]})]})}}]),r}(b.Component),J=H,V=o(90336),X=function(h){j()(r,h);var p=x()(r);function r(c){var s;return g()(this,r),s=p.call(this,c),f()(m()(s),"toGoodsDetail",function(i){(0,C.WF)("/goods/details?goodsCode=".concat(i))}),s.state={},s}return y()(r,[{key:"render",value:function(){var s=this,i=this.props,d=i.goods,u=i.totalCount;return(0,e.jsxs)("div",{className:"baby-love-custom-order-details-goods",children:[(0,e.jsxs)("div",{className:"baby-love-custom-order-details-goods-header",children:[(0,e.jsx)("span",{className:"baby-love-custom-order-details-goods-total-shop",children:"BabyLove"}),(0,e.jsxs)("span",{className:"baby-love-custom-order-details-goods-total-count",children:["\u5171 ",u," \u4EF6\u5546\u54C1"]})]}),(0,e.jsx)("ul",{children:(d||[]).map(function(n){var v,a,t;return(0,e.jsxs)("li",{onClick:function(){return s.toGoodsDetail(n.goodsCode)},children:[(0,e.jsx)("div",{className:"baby-love-custom-order-details-goods-picture",style:{backgroundImage:"url(".concat(((v=n.pictures)===null||v===void 0||(a=v[0])===null||a===void 0?void 0:a.pictureUrl)||V,")")}}),(0,e.jsxs)("div",{className:"baby-love-custom-order-details-goods-info",children:[(0,e.jsx)("div",{className:"baby-love-custom-order-details-goods-title",children:(0,e.jsx)(l.mH,{direction:"end",rows:2,content:n.goodsTitle})}),(0,e.jsxs)("div",{className:"baby-love-custom-order-details-goods-details",children:[(0,e.jsxs)("span",{className:"baby-love-custom-order-details-goods-item-price",children:["\xA5",n.goodsPrice,(0,e.jsx)("span",{className:"baby-love-custom-order-details-goods-item-origin-price",children:n.goodsOriginPrice?"\xA5".concat(n.goodsOriginPrice):""})]}),(0,e.jsxs)("span",{className:"baby-love-custom-order-details-goods-item-count",children:["x",((t=n.ordersGoodsRelations)===null||t===void 0?void 0:t.buyCount)||"?"]})]})]})]},n)})})]})}}]),r}(b.Component),k=X,U=function(h){j()(r,h);var p=x()(r);function r(c){var s;return g()(this,r),s=p.call(this,c),s.state={},s}return y()(r,[{key:"render",value:function(){var s=Y.iM[this.props.orderStatus]||{},i=s.icon,d=s.title,u=s.backgroundColor;return(0,e.jsxs)("div",{className:"baby-love-custom-order-details-status",style:{backgroundColor:u},children:[i,(0,e.jsx)("span",{children:d})]})}}]),r}(b.Component),Z=U,K=function(h){j()(r,h);var p=x()(r);function r(c){var s;g()(this,r),s=p.call(this,c),f()(m()(s),"setLoading",function(d){s.setState({isShowLoading:d})}),f()(m()(s),"getOrderDetails",A()(F()().mark(function d(){var u,n;return F()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s.orderCode){a.next=2;break}return a.abrupt("return");case 2:return s.setLoading(!0),a.t0=O.Z,a.t1=D.pV,a.t2=s.orderCode,a.next=8,(0,C.YX)();case 8:return a.t3=a.sent,a.t4={orderCode:a.t2,shoppingCartCode:a.t3},a.next=12,a.t0.post.call(a.t0,a.t1,a.t4);case 12:u=a.sent,n=u.data,n&&(n.createdAt=W()(n.createdAt).format("YYYY-MM-DD HH:mm:ss"),s.setState({orderDetails:n})),s.setLoading(!1);case 16:case"end":return a.stop()}},d)}))),s.state={orderDetails:{},isShowLoading:!1};var i=new URLSearchParams(location.search);return s.orderCode=i.get("orderCode"),s}return y()(r,[{key:"componentDidMount",value:function(){this.getOrderDetails()}},{key:"render",value:function(){var s=this.state.orderDetails||{},i=s.status,d=s.orderCode,u=s.expressWay,n=s.expressCode,v=s.totalPrice,a=s.createdAt,t=s.goods,S=s.totalCount;return(0,e.jsx)("div",{className:"baby-love-custom-order-details",children:this.state.isShowLoading?(0,e.jsx)(l.k_,{color:"primary"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"baby-love-custom-order-details-info",children:[(0,e.jsx)(Z,{orderStatus:i}),(0,e.jsx)(J,{orderCode:d,createdAt:a,expressWay:u,expressCode:n,totalPrice:v}),(0,e.jsx)(k,{goods:t,totalCount:S})]}),(0,e.jsx)(M,{orderCode:d,orderStatus:i,expressCode:n,flushOrderDetails:this.getOrderDetails})]})})}}]),r}(b.Component),Q=K}}]);
