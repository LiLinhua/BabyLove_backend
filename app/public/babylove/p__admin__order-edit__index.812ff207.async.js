(self.webpackChunk=self.webpackChunk||[]).push([[605],{14450:function(J,R,h){"use strict";h.r(R),h.d(R,{default:function(){return ve}});var j=h(15009),L=h.n(j),A=h(99289),x=h.n(A),r=h(12444),t=h.n(r),a=h(72004),s=h.n(a),o=h(25098),l=h.n(o),w=h(31996),f=h.n(w),S=h(26037),D=h.n(S),B=h(9783),u=h.n(B),i=h(12695),$=h(27484),T=h.n($),_=h(67294),z=h(47866),k=h(42912),M=h(92692),F=h(61544),b=h(58877),N=h.n(b),n=h(85893),m=function(V){f()(E,V);var Z=D()(E);function E(U){var e;return t()(this,E),e=Z.call(this,U),u()(l()(e),"showMask",function(){e.setState({isShowMask:!0},function(){setTimeout(function(){e.sigCanvas.fromDataURL(e.props.userSignature,{velocityFilterWeight:2})},500)})}),u()(l()(e),"closeMask",function(){e.setState({isShowMask:!1})}),u()(l()(e),"clearSignature",function(){e.sigCanvas.clear()}),u()(l()(e),"confirmSignature",x()(L()().mark(function C(){var d,v,c,y,g,p;return L()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(d=e.props,v=d.orderCode,c=d.flushOrderDetails,!e.sigCanvas.isEmpty()){P.next=3;break}return P.abrupt("return",i.FN.show({content:"\u8BF7\u5148\u7B7E\u540D"}));case 3:return P.next=5,k.Z.post(z.yV,{orderCode:v,userSignature:e.sigCanvas.toDataURL()});case 5:y=P.sent,g=y.success,p=y.message,g?(i.FN.show({content:"\u4FDD\u5B58\u6210\u529F",icon:"success"}),e.setState({isShowMask:!1},c)):i.FN.show({content:p||"\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"success"});case 9:case"end":return P.stop()}},C)}))),e.state={isShowMask:!1},e}return s()(E,[{key:"render",value:function(){var e=this;return(0,n.jsxs)("div",{className:"baby-love-admin-order-details-signature",children:[(0,n.jsxs)(i.zd,{visible:this.state.isShowMask,children:[(0,n.jsx)("div",{className:"baby-love-admin-order-details-signature-content",children:(0,n.jsx)(N(),{ref:function(d){e.sigCanvas=d},penColor:"black",canvasProps:{width:window.innerWidth-40,height:window.innerHeight-60},backgroundColor:"white"})}),(0,n.jsxs)("div",{className:"baby-love-admin-order-details-signature-actions",children:[(0,n.jsx)(i.zx,{onClick:this.clearSignature,children:"\u6E05\u9664"}),(0,n.jsx)(i.zx,{color:"primary",onClick:this.confirmSignature,children:"\u786E\u8BA4"}),(0,n.jsx)(i.zx,{onClick:this.closeMask,children:"\u5173\u95ED"})]})]}),(0,n.jsx)(i.zx,{color:"primary",disabled:this.props.isCanNotModify,onClick:this.showMask,children:"\u5BA2\u6237\u7B7E\u540D"})]})}}]),E}(_.Component),re=m,se=function(V){f()(E,V);var Z=D()(E);function E(U){var e;return t()(this,E),e=Z.call(this,U),u()(l()(e),"formRef",_.createRef()),u()(l()(e),"lookLogistics",function(){if((0,F.JG)(e.props.expressCode)){i.FN.show({icon:"success",content:"\u7269\u6D41\u5355\u53F7\u5DF2\u590D\u5236\uFF0C\u8DF3\u8F6C\u67E5\u8BE2\u4E2D...",duration:2e3}),setTimeout(function(){window.open("https://m.kuaidi100.com/index.jsp")},2e3);return}i.FN.show({icon:"fail",content:"\u7269\u6D41\u5355\u53F7\u590D\u5236\u5931\u8D25"})}),u()(l()(e),"cancelOrder",x()(L()().mark(function C(){var d,v,c,y;return L()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,i.Vq.confirm({content:"\u786E\u5B9A\u53D6\u6D88\u8BA2\u5355\u5417\uFF1F"});case 2:if(d=p.sent,d){p.next=5;break}return p.abrupt("return");case 5:return e.setState({isCanceling:!0}),p.next=8,k.Z.post(z.yV,{orderCode:e.props.orderCode,orderStatus:M.iM.CANCELED.value});case 8:v=p.sent,c=v.success,y=v.message,c?(i.FN.show({content:"\u53D6\u6D88\u6210\u529F",icon:"success"}),e.props.flushOrderDetails()):i.FN.show({content:y||"\u53D6\u6D88\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"fail"}),e.setState({isCanceling:!1});case 13:case"end":return p.stop()}},C)}))),u()(l()(e),"comfirmAddOrder",x()(L()().mark(function C(){var d,v,c,y,g,p;return L()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,e.formRef.current.validateFields();case 2:return d=P.sent,v=d.goodsCode,c=d.buyCount,P.next=7,k.Z.post(z.f9,{orderCode:e.props.orderCode,goodsCode:v,buyCount:+c});case 7:y=P.sent,g=y.success,p=y.message,g?(i.FN.show({content:"\u6DFB\u52A0\u6210\u529F",icon:"success"}),e.props.flushOrderDetails()):i.FN.show({content:p||"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"fail"});case 11:case"end":return P.stop()}},C)}))),u()(l()(e),"addGoods",function(){i.Vq.confirm({content:(0,n.jsx)("div",{children:(0,n.jsxs)(i.l0,{ref:e.formRef,className:"baby-love-admin-order-details-add-goods",layout:"horizontal",children:[(0,n.jsx)(i.l0.Item,{name:"goodsCode",label:"\u5546\u54C1\u7F16\u7801",rules:[{required:!0,message:"\u5546\u54C1\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7F16\u7801"})}),(0,n.jsx)(i.l0.Item,{name:"buyCount",label:"\u8D2D\u4E70\u6570\u91CF",rules:[{required:!0,message:"\u8D2D\u4E70\u6570\u91CF\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{type:"number",placeholder:"\u8BF7\u8F93\u5165\u8D2D\u4E70\u6570\u91CF"})})]})}),confirmText:"\u786E\u5B9A",onConfirm:e.comfirmAddOrder})}),e.state={isCanceling:!1},e}return s()(E,[{key:"render",value:function(){var e=[M.iM.FINISHED.value,M.iM.CANCELED.value].includes(this.props.orderStatus),C=this.props.orderStatus!==M.iM.WAIT_PAY.value,d=this.props,v=d.orderCode,c=d.expressCode,y=d.flushOrderDetails,g=d.userSignature;return(0,n.jsxs)("div",{className:"baby-love-admin-order-details-actions",children:[(0,n.jsx)(i.zx,{color:"primary",loading:this.state.isCanceling,disabled:e,onClick:this.cancelOrder,children:"\u53D6\u6D88\u8BA2\u5355"}),c?(0,n.jsx)(i.zx,{color:"primary",disabled:!c,onClick:this.lookLogistics,children:"\u67E5\u8BE2\u7269\u6D41"}):null,C?null:(0,n.jsx)(i.zx,{color:"primary",disabled:C,onClick:this.addGoods,children:"\u6DFB\u52A0\u5546\u54C1"}),(0,n.jsx)(re,{orderCode:v,isCanNotModify:e,flushOrderDetails:y,userSignature:g})]})}}]),E}(_.Component),ne=se,q=function(V){f()(E,V);var Z=D()(E);function E(U){var e;return t()(this,E),e=Z.call(this,U),u()(l()(e),"formRef",_.createRef()),u()(l()(e),"saveOrder",x()(L()().mark(function C(){var d,v,c,y,g,p,O,P,I,G,Y,H,te,oe,ie;return L()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(d=e.props,v=d.orderCode,c=d.flushOrderDetails,y=d.selectedUser,g=d.orderStatus,p=e.formRef.current.getFieldsValue(["expressWay","expressCode","expressAddress","status","payWay"]),O=p.expressWay,P=p.expressCode,I=p.expressAddress,G=p.status,Y=p.payWay,!(g!==M.Fi[G].value&&[M.iM.FINISHED.value,M.iM.CANCELED.value].includes(M.Fi[G].value))){K.next=8;break}return K.next=5,i.Vq.confirm({content:"\u4FDD\u5B58\u540E\u5C06\u65E0\u6CD5\u518D\u4FEE\u6539\u8BE5\u8BA2\u5355\uFF0C\u786E\u8BA4\u4FDD\u5B58\u5417\uFF1F"});case 5:if(H=K.sent,H){K.next=8;break}return K.abrupt("return");case 8:return e.setState({isSavingExpress:!0}),K.next=11,k.Z.post(z.yV,{orderCode:v,expressWay:O,expressCode:P,expressAddress:I,payWay:Y,orderStatus:M.Fi[G].value,userCode:y==null?void 0:y.userCode});case 11:te=K.sent,oe=te.success,ie=te.message,oe?(i.FN.show({content:"\u4FDD\u5B58\u6210\u529F",icon:"success"}),c()):i.FN.show({content:ie||"\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"success"}),e.setState({isSavingExpress:!1});case 16:case"end":return K.stop()}},C)}))),u()(l()(e),"handleOrderStatusPickerShow",function(C){e.setState({isShowOrderStatusPicker:C})}),u()(l()(e),"setOrderStatus",function(C){e.formRef.current.setFieldsValue({status:M.iM[C].title}),e.handleOrderStatusPickerShow(!1)}),e.state={isSavingExpress:!1,isShowOrderStatusPicker:!1},e.orderStatusColumns=[Object.values(M.iM).map(function(C){return{label:C.title,value:C.value}})],e}return s()(E,[{key:"componentWillReceiveProps",value:function(e){this.formRef.current.setFieldsValue({orderCode:e.orderCode,status:M.iM[e.orderStatus].title,createdAt:e.createdAt,totalPrice:e.totalPrice,payWay:e.payWay,expressWay:e.expressWay,expressCode:e.expressCode,expressAddress:e.expressAddress,selectedUser:e.selectedUser})}},{key:"render",value:function(){var e,C=this,d=this.state.isShowOrderStatusPicker,v=this.props,c=v.orderCode,y=v.createdAt,g=v.totalPrice,p=v.expressWay,O=v.expressCode,P=v.expressAddress,I=v.payWay,G=v.showSelectUserModal,Y=v.selectedUser,H=[M.iM.FINISHED.value,M.iM.CANCELED.value].includes(this.props.orderStatus);return(0,n.jsxs)("div",{className:"baby-love-admin-order-details-base-info",children:[(0,n.jsxs)(i.l0,{ref:this.formRef,layout:"horizontal",children:[(0,n.jsx)(i.l0.Item,{name:"orderCode",label:"\u8BA2\u5355\u7F16\u53F7",initialValue:c||"-",rules:[{required:!0,message:"\u8BA2\u5355\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{readOnly:!0,placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"})}),(0,n.jsx)(i.l0.Item,{name:"createdAt",label:"\u8BA2\u5355\u65F6\u95F4",initialValue:y||"-",rules:[{required:!0,message:"\u8BA2\u5355\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{readOnly:!0,placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u65F6\u95F4"})}),(0,n.jsx)(i.l0.Item,{name:"totalPrice",label:"\u8BA2\u5355\u603B\u4EF7",initialValue:"\xA5".concat(g||"-"),rules:[{required:!0,message:"\u8BA2\u5355\u603B\u4EF7\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{readOnly:!0,placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u603B\u4EF7"})}),(0,n.jsx)(i.l0.Item,{name:"status",label:"\u8BA2\u5355\u72B6\u6001",initialValue:"".concat(((e=M.iM[this.props.orderStatus])===null||e===void 0?void 0:e.title)||""),rules:[{required:!1,message:"\u8BA2\u5355\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A"}],onClick:H?null:function(){return C.handleOrderStatusPickerShow(!0)},children:(0,n.jsx)(i.II,{placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u72B6\u6001",readOnly:!0})}),(0,n.jsx)(i.l0.Item,{name:"userCode",label:"\u5173\u8054\u7528\u6237",initialValue:Y?"".concat(Y.userName,"(").concat(Y.userNickname||Y.userCode,")"):"",rules:[{required:!1,message:"\u5173\u8054\u7528\u6237\u4E0D\u80FD\u4E3A\u7A7A"}],onClick:H?null:G,children:(0,n.jsx)(i.II,{placeholder:"\u8BF7\u5173\u8054\u7528\u6237",readOnly:!0})}),(0,n.jsx)(i.l0.Item,{name:"payWay",label:"\u652F\u4ED8\u65B9\u5F0F",initialValue:"".concat(I||void 0),rules:[{required:!1,message:"\u652F\u4ED8\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsxs)(i.Y8.Group,{disabled:H,children:[(0,n.jsx)(i.Y8,{value:M.Zm.USER_BALANCE.value,children:"\u7528\u6237\u4F59\u989D"}),(0,n.jsx)(i.Y8,{value:M.Zm.CASH.value,children:"\u73B0\u91D1"}),(0,n.jsx)(i.Y8,{value:M.Zm.ALIPAY.value,children:"\u652F\u4ED8\u5B9D"}),(0,n.jsx)(i.Y8,{value:M.Zm.WECHAT.value,children:"\u5FAE\u4FE1"})]})}),(0,n.jsx)(i.l0.Item,{name:"expressWay",label:"\u914D\u9001\u65B9\u5F0F",initialValue:"".concat(p||""),rules:[{required:!1,message:"\u914D\u9001\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{disabled:H,placeholder:"\u8BF7\u8F93\u5165\u914D\u9001\u65B9\u5F0F"})}),(0,n.jsx)(i.l0.Item,{name:"expressCode",label:"\u5FEB\u9012\u5355\u53F7",initialValue:"".concat(O||""),rules:[{required:!1,message:"\u5FEB\u9012\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{disabled:H,placeholder:"\u8BF7\u8F93\u5165\u5FEB\u9012\u5355\u53F7"})}),(0,n.jsx)(i.l0.Item,{name:"expressAddress",label:"\u914D\u9001\u5730\u5740",initialValue:"".concat(P||""),rules:[{required:!1,message:"\u914D\u9001\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,n.jsx)(i.II,{disabled:H,placeholder:"\u8BF7\u8F93\u5165\u914D\u9001\u5730\u5740"})}),(0,n.jsx)(i.l0.Item,{name:"submit",className:"baby-love-admin-order-details-base-info-save",children:(0,n.jsx)(i.zx,{color:"primary",disabled:H,loading:this.state.isSavingExpress,onClick:this.saveOrder,children:"\u4FDD\u5B58"})})]}),(0,n.jsx)(i.cW,{columns:this.orderStatusColumns,visible:d,onClose:function(){return C.handleOrderStatusPickerShow(!1)},placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u72B6\u6001",onConfirm:this.setOrderStatus})]})}}]),E}(_.Component),W=q,X=h(90336),ae=h(27938),Q=h(2681),ee=function(V){f()(E,V);var Z=D()(E);function E(U){var e;return t()(this,E),e=Z.call(this,U),u()(l()(e),"stopPropagation",function(C){C&&C.stopPropagation()}),u()(l()(e),"remove",function(){var C=x()(L()().mark(function d(v,c){var y;return L()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return e.stopPropagation(v),p.next=3,i.Vq.confirm({content:"\u786E\u5B9A\u5220\u9664\u8BE5\u5546\u54C1\u5417\uFF1F"});case 3:if(y=p.sent,y){p.next=6;break}return p.abrupt("return");case 6:e.setState({buyCount:0},function(){e.comfirmEditBuyCount(c)});case 7:case"end":return p.stop()}},d)}));return function(d,v){return C.apply(this,arguments)}}()),u()(l()(e),"comfirmEditBuyCount",function(){var C=x()(L()().mark(function d(v){var c,y,g,p,O;return L()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return c=e.state.buyCount,y=e.props.flushOrderDetails,I.next=4,k.Z.post(z.Dz,{orderCode:e.props.orderCode,goodsCode:v,buyCount:+c});case 4:g=I.sent,p=g.success,O=g.message,p?(i.FN.show({content:"\u66F4\u65B0\u6210\u529F",icon:"success"}),y()):i.FN.show({content:O||"\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"fail"});case 8:case"end":return I.stop()}},d)}));return function(d){return C.apply(this,arguments)}}()),u()(l()(e),"changeBuyCount",function(C){e.setState({buyCount:C})}),u()(l()(e),"edit",function(C,d,v){e.stopPropagation(C),e.setState({buyCount:v},function(){i.Vq.confirm({content:(0,n.jsx)(i.II,{type:"number",defaultValue:e.state.buyCount,placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6570\u91CF",onChange:e.changeBuyCount}),confirmText:"\u786E\u5B9A",onConfirm:function(){var c=x()(L()().mark(function g(){return L()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,e.comfirmEditBuyCount(d);case 2:case"end":return O.stop()}},g)}));function y(){return c.apply(this,arguments)}return y}()})})}),u()(l()(e),"toGoodsDetail",function(C){(0,F.WF)("/goods/details?goodsCode=".concat(C))}),e.state={buyCount:U.buyCount},e}return s()(E,[{key:"componentWillReceiveProps",value:function(e){this.setState({buyCount:e.buyCount})}},{key:"render",value:function(){var e=this,C=this.props,d=C.goods,v=C.totalCount,c=this.props.orderStatus!==M.iM.WAIT_PAY.value;return(0,n.jsxs)("div",{className:"baby-love-admin-order-details-goods",children:[(0,n.jsxs)("div",{className:"baby-love-admin-order-details-goods-header",children:[(0,n.jsx)("span",{className:"baby-love-admin-order-details-goods-total-shop",children:"BabyLove"}),(0,n.jsxs)("span",{className:"baby-love-admin-order-details-goods-total-count",children:["\u5171 ",v," \u4EF6\u5546\u54C1"]})]}),(0,n.jsx)("ul",{children:(d||[]).map(function(y){var g,p,O;return(0,n.jsxs)("li",{onClick:function(){return e.toGoodsDetail(y.goodsCode)},children:[(0,n.jsx)("div",{className:"baby-love-admin-order-details-goods-picture",style:{backgroundImage:"url(".concat(((g=y.pictures)===null||g===void 0||(p=g[0])===null||p===void 0?void 0:p.pictureUrl)||X,")")}}),(0,n.jsxs)("div",{className:"baby-love-admin-order-details-goods-info",children:[(0,n.jsx)("div",{className:"baby-love-admin-order-details-goods-title",children:(0,n.jsx)(i.mH,{direction:"end",rows:2,content:y.goodsTitle})}),(0,n.jsxs)("div",{className:"baby-love-admin-order-details-goods-details",children:[(0,n.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-price",children:["\xA5 ",y.goodsPrice]}),(0,n.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-count",children:["x",((O=y.ordersGoodsRelations)===null||O===void 0?void 0:O.buyCount)||"?"]})]})]}),c?null:(0,n.jsxs)("div",{className:"baby-love-admin-order-details-goods-item-actions",style:c?{pointerEvents:"none",opacity:.5}:null,children:[(0,n.jsxs)("span",{onClick:function(I){var G;return e.edit(I,y.goodsCode,(G=y.ordersGoodsRelations)===null||G===void 0?void 0:G.buyCount)},children:["\u7F16\u8F91 ",(0,n.jsx)(ae.Z,{})]}),(0,n.jsxs)("span",{onClick:function(I){return e.remove(I,y.goodsCode)},children:["\u5220\u9664 ",(0,n.jsx)(Q.Z,{})]})]})]},y.goodsCode)})})]})}}]),E}(_.Component),le=ee,ue=function(V){f()(E,V);var Z=D()(E);function E(U){var e;return t()(this,E),e=Z.call(this,U),e.state={},e}return s()(E,[{key:"render",value:function(){var e=M.iM[this.props.orderStatus]||{},C=e.icon,d=e.title,v=e.backgroundColor;return(0,n.jsxs)("div",{className:"baby-love-admin-order-details-status",style:{backgroundColor:v},children:[C,(0,n.jsx)("span",{children:d})]})}}]),E}(_.Component),de=ue,ce=function(V){f()(E,V);var Z=D()(E);function E(U){return t()(this,E),Z.call(this,U)}return s()(E,[{key:"render",value:function(){var e=this.props,C=e.isShowSelectUserModal,d=e.isShowModalLoading,v=e.userList,c=e.selectUser,y=e.closeModal,g=e.searchUser,p=(0,n.jsx)(i.k_,{color:"primary"});return!d&&v.length?p=(0,n.jsx)(i.aV,{children:v.map(function(O){return(0,n.jsx)(i.aV.Item,{onClick:function(){return c(O)},children:(0,n.jsx)(i.mH,{direction:"end",rows:1,content:O?"".concat(O.userName,"(").concat(O.userNickname||O.userCode,")"):"-"})},O.userCode)})}):p=(0,n.jsx)("div",{className:"baby-love-admin-order-select-user-empty",children:"\u6682\u65E0\u6570\u636E"}),(0,n.jsx)(i.u_,{title:"\u9009\u62E9\u7528\u6237",visible:C,onClose:y,showCloseButton:!0,onAction:y,actions:[{key:"close",text:"\u5173\u95ED"}],content:(0,n.jsxs)("div",{className:"baby-love-admin-order-select-user",children:[(0,n.jsx)("div",{className:"baby-love-admin-order-select-user-content",children:p}),(0,n.jsx)(i.E1,{placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",onChange:g})]})})}}]),E}(_.Component),he=ce,fe=function(V){f()(E,V);var Z=D()(E);function E(U){var e;t()(this,E),e=Z.call(this,U),u()(l()(e),"orderBaseInfoRef",_.createRef()),u()(l()(e),"setLoading",function(d){e.setState({isShowLoading:d})}),u()(l()(e),"getOrderDetails",x()(L()().mark(function d(){var v,c;return L()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(e.orderCode){g.next=2;break}return g.abrupt("return");case 2:return e.setLoading(!0),g.next=5,k.Z.post(z.mL,{orderCode:e.orderCode});case 5:v=g.sent,c=v.data,c&&(c.createdAt=T()(c.createdAt).format("YYYY-MM-DD HH:mm:ss"),e.setState({orderDetails:c,selectedUser:c.user})),e.setLoading(!1);case 9:case"end":return g.stop()}},d)}))),u()(l()(e),"getUserList",x()(L()().mark(function d(){var v,c;return L()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return e.setState({isShowModalLoading:!0}),g.next=3,k.Z.post(z.bp);case 3:v=g.sent,c=v.data,c=c.list,e.setState({isShowModalLoading:!1,userList:c,showUserList:c});case 7:case"end":return g.stop()}},d)}))),u()(l()(e),"showSelectUserModal",function(){var d=e.state.userList;(!d||d.length<1)&&e.getUserList(),e.setState({isShowSelectUserModal:!0})}),u()(l()(e),"closeSelectUserModal",function(){e.setState({isShowSelectUserModal:!1})}),u()(l()(e),"searchUser",function(){var d=x()(L()().mark(function v(c){return L()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:e.setState({showUserList:e.state.userList.filter(function(p){return p.userName.indexOf(c)>-1||(p.userNickname||"").indexOf(c)>-1||(p.userPhone||"").indexOf(c)>-1||p.userCode.indexOf(c)>-1})});case 1:case"end":return g.stop()}},v)}));return function(v){return d.apply(this,arguments)}}()),u()(l()(e),"selectUser",function(){var d=x()(L()().mark(function v(c){var y,g;return L()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:(y=e.orderBaseInfoRef.current.formRef)===null||y===void 0||(g=y.current)===null||g===void 0||g.setFieldsValue({userCode:c?"".concat(c.userName,"(").concat(c.userNickname||c.userCode,")"):""}),e.setState({selectedUser:c,isShowSelectUserModal:!1});case 2:case"end":return O.stop()}},v)}));return function(v){return d.apply(this,arguments)}}()),e.state={orderDetails:{},isShowLoading:!1,userList:[],showUserList:[],isShowSelectUserModal:!1,isShowModalLoading:!1,selectedUser:null};var C=new URLSearchParams(location.search);return e.orderCode=C.get("orderCode"),e}return s()(E,[{key:"componentDidMount",value:function(){this.getOrderDetails()}},{key:"render",value:function(){var e=this.state.orderDetails||{},C=e.status,d=e.orderCode,v=e.expressWay,c=e.expressCode,y=e.expressAddress,g=e.totalPrice,p=e.payWay,O=e.createdAt,P=e.goods,I=e.totalCount,G=e.userSignature,Y=this.state,H=Y.showUserList,te=Y.isShowSelectUserModal,oe=Y.isShowModalLoading,ie=Y.selectedUser;return(0,n.jsxs)("div",{className:"baby-love-admin-order-details",children:[this.state.isShowLoading?(0,n.jsx)(i.k_,{color:"primary"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"baby-love-admin-order-details-info",children:[(0,n.jsx)(de,{orderStatus:C}),(0,n.jsx)(W,{ref:this.orderBaseInfoRef,orderCode:d,createdAt:O,orderStatus:C,expressWay:v,expressCode:c,expressAddress:y,payWay:p,totalPrice:g,selectedUser:ie,flushOrderDetails:this.getOrderDetails,showSelectUserModal:this.showSelectUserModal}),(0,n.jsx)(le,{goods:P,orderStatus:C,totalCount:I,orderCode:d,flushOrderDetails:this.getOrderDetails})]}),(0,n.jsx)(ne,{orderCode:d,orderStatus:C,expressCode:c,userSignature:G,flushOrderDetails:this.getOrderDetails})]}),(0,n.jsx)(he,{isShowSelectUserModal:te,isShowModalLoading:oe,userList:H,selectUser:this.selectUser,closeModal:this.closeSelectUserModal,searchUser:this.searchUser})]})}}]),E}(_.Component),ve=fe},2681:function(J,R,h){"use strict";var j=h(67294);function L(A){return j.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},A,{style:Object.assign({verticalAlign:"-0.125em"},A.style),className:["antd-mobile-icon",A.className].filter(Boolean).join(" ")}),j.createElement("g",{id:"DeleteOutline-DeleteOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},j.createElement("g",{fill:"currentColor",fillRule:"nonzero",id:"DeleteOutline-\u5F62\u72B6\u7ED3\u5408"},j.createElement("path",{d:"M33,3 C34.6568542,3 36,4.34314575 36,6 L36,9 L42.6,9 C42.8209139,9 43,9.1790861 43,9.4 L43,11.6 C43,11.8209139 42.8209139,12 42.6,12 L41,12 L41,39 C41,42.3137085 38.3137085,45 35,45 L13,45 C9.6862915,45 7,42.3137085 7,39 L7,12 L5.4,12 C5.1790861,12 5,11.8209139 5,11.6 L5,9.4 C5,9.1790861 5.1790861,9 5.4,9 L12,9 L12,6 C12,4.34314575 13.3431458,3 15,3 L33,3 Z M38,12 L10,12 L10,39 C10,40.5976809 11.24892,41.9036609 12.8237272,41.9949073 L13,42 L35,42 C36.5976809,42 37.9036609,40.75108 37.9949073,39.1762728 L38,39 L38,12 Z M19.6,18 C19.8209139,18 20,18.1790861 20,18.4 L20,35.6 C20,35.8209139 19.8209139,36 19.6,36 L17.4,36 C17.1790861,36 17,35.8209139 17,35.6 L17,18.4 C17,18.1790861 17.1790861,18 17.4,18 L19.6,18 Z M31.6,18 C31.8209139,18 32,18.1790861 32,18.4 L32,35.6 C32,35.8209139 31.8209139,36 31.6,36 L29.4,36 C29.1790861,36 29,35.8209139 29,35.6 L29,18.4 C29,18.1790861 29.1790861,18 29.4,18 L31.6,18 Z M33,6 L15,6 L15,9 L33,9 L33,6 Z"}))))}R.Z=L},27938:function(J,R,h){"use strict";var j=h(67294);function L(A){return j.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},A,{style:Object.assign({verticalAlign:"-0.125em"},A.style),className:["antd-mobile-icon",A.className].filter(Boolean).join(" ")}),j.createElement("g",{id:"EditSOutline-EditSOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},j.createElement("g",{id:"EditSOutline-\u7F16\u7EC4"},j.createElement("rect",{id:"EditSOutline-\u77E9\u5F62",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),j.createElement("path",{d:"M39.1558113,6.84476948 L39.1547876,6.84478452 C41.6150708,9.30533949 41.6150708,13.2945216 39.1547875,15.7550568 L14.2175882,40.6933641 C14.0205351,40.8899288 13.7535085,41 13.475183,41 L7.10015653,41 C5.94027729,41 5.00000168,40.0596889 5.00000168,38.8997532 L5.00000168,32.525535 C4.9995034,32.2468348 5.1098075,31.9793647 5.30661943,31.7820434 L30.2469685,6.84477025 C32.707296,4.38507671 36.6954838,4.38507671 39.1558113,6.84476948 Z M41.5764707,38 C41.8588237,38 42,38.1333332 42,38.4000001 L42,40.5999999 C42,40.8666668 41.8588237,41 41.5764707,41 L24.4235293,41 C24.1411763,41 24,40.8666668 24,40.5999999 L24,38.4000001 C24,38.1333332 24.1411763,38 24.4235293,38 L41.5764707,38 Z M28.172,13.371 L8.2730898,33.272167 C8.19433904,33.3510089 8.15023081,33.4579141 8.15023081,33.5693515 L8.15023081,37.4317018 C8.15023081,37.663779 8.33819467,37.8517506 8.57026108,37.8517506 L12.4303379,37.8517506 C12.5419214,37.8517506 12.6488431,37.8069757 12.7275092,37.7278363 L32.628,17.827 L28.172,13.371 Z M41.5555549,31 C41.8518518,31 42,31.1333332 42,31.4000001 L42,33.5999999 C42,33.8666668 41.8518518,34 41.5555549,34 L32.4444451,34 C32.1481482,34 32,33.8666668 32,33.5999999 L32,31.4000001 C32,31.1333332 32.1481482,31 32.4444451,31 L41.5555549,31 Z M32.607562,8.94503104 L32.4721022,9.07104573 L30.371,11.172 L34.827,15.628 L36.9275554,13.5288315 C38.1074041,12.3492947 38.1631188,10.4544078 37.0546144,9.20757614 L36.9286053,9.07316031 L36.9286254,9.07104573 C35.7488554,7.89144977 33.8540626,7.83619529 32.607562,8.94503104 Z",id:"EditSOutline-\u5F62\u72B6\u7ED3\u5408",fill:"currentColor",fillRule:"nonzero"}))))}R.Z=L},58877:function(J,R,h){(function(j,L){J.exports=L(h(45697),h(67294),h(21518),h(41400))})(this,function(j,L,A,x){return function(r){function t(s){if(a[s])return a[s].exports;var o=a[s]={exports:{},id:s,loaded:!1};return r[s].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=r,t.c=a,t.p="",t(0)}([function(r,t,a){"use strict";function s(F){return F&&F.__esModule?F:{default:F}}function o(F,b){var N={};for(var n in F)b.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(F,n)&&(N[n]=F[n]);return N}function l(F,b){if(!(F instanceof b))throw new TypeError("Cannot call a class as a function")}function w(F,b){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?F:b}function f(F,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);F.prototype=Object.create(b&&b.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(F,b):F.__proto__=b)}Object.defineProperty(t,"__esModule",{value:!0});var S=Object.assign||function(F){for(var b=1;b<arguments.length;b++){var N=arguments[b];for(var n in N)Object.prototype.hasOwnProperty.call(N,n)&&(F[n]=N[n])}return F},D=function(){function F(b,N){for(var n=0;n<N.length;n++){var m=N[n];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,N,n){return N&&F(b.prototype,N),n&&F(b,n),b}}(),B=a(1),u=s(B),i=a(2),$=s(i),T=a(3),_=s(T),z=a(4),k=s(z),M=function(F){function b(){var N,n,m,re;l(this,b);for(var se=arguments.length,ne=Array(se),q=0;q<se;q++)ne[q]=arguments[q];return n=m=w(this,(N=b.__proto__||Object.getPrototypeOf(b)).call.apply(N,[this].concat(ne))),m._sigPad=null,m._excludeOurProps=function(){var W=m.props,X=(W.canvasProps,W.clearOnResize,o(W,["canvasProps","clearOnResize"]));return X},m.getCanvas=function(){return m._canvas},m.getTrimmedCanvas=function(){var W=document.createElement("canvas");return W.width=m._canvas.width,W.height=m._canvas.height,W.getContext("2d").drawImage(m._canvas,0,0),(0,k.default)(W)},m.getSignaturePad=function(){return m._sigPad},m._checkClearOnResize=function(){m.props.clearOnResize&&m._resizeCanvas()},m._resizeCanvas=function(){var W=m.props.canvasProps||{},X=W.width,ae=W.height;if(!X||!ae){var Q=m._canvas,ee=Math.max(window.devicePixelRatio||1,1);X||(Q.width=Q.offsetWidth*ee),ae||(Q.height=Q.offsetHeight*ee),Q.getContext("2d").scale(ee,ee),m.clear()}},m.on=function(){return window.addEventListener("resize",m._checkClearOnResize),m._sigPad.on()},m.off=function(){return window.removeEventListener("resize",m._checkClearOnResize),m._sigPad.off()},m.clear=function(){return m._sigPad.clear()},m.isEmpty=function(){return m._sigPad.isEmpty()},m.fromDataURL=function(W,X){return m._sigPad.fromDataURL(W,X)},m.toDataURL=function(W,X){return m._sigPad.toDataURL(W,X)},m.fromData=function(W){return m._sigPad.fromData(W)},m.toData=function(){return m._sigPad.toData()},re=n,w(m,re)}return f(b,F),D(b,[{key:"componentDidMount",value:function(){this._sigPad=new _.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var N=this,n=this.props.canvasProps;return $.default.createElement("canvas",S({ref:function(m){N._canvas=m}},n))}}]),b}(i.Component);M.propTypes={velocityFilterWeight:u.default.number,minWidth:u.default.number,maxWidth:u.default.number,minDistance:u.default.number,dotSize:u.default.oneOfType([u.default.number,u.default.func]),penColor:u.default.string,throttle:u.default.number,onEnd:u.default.func,onBegin:u.default.func,canvasProps:u.default.object,clearOnResize:u.default.bool},M.defaultProps={clearOnResize:!0},t.default=M},function(r,t){r.exports=j},function(r,t){r.exports=L},function(r,t){r.exports=A},function(r,t){r.exports=x}])})},41400:function(J){(function(R,h){J.exports=h()})(this,function(){return function(R){function h(L){if(j[L])return j[L].exports;var A=j[L]={exports:{},id:L,loaded:!1};return R[L].call(A.exports,A,A.exports,h),A.loaded=!0,A.exports}var j={};return h.m=R,h.c=j,h.p="",h(0)}([function(R,h){"use strict";function j(t){var a=t.getContext("2d"),s=t.width,o=t.height,l=a.getImageData(0,0,s,o).data,w=x(!0,s,o,l),f=x(!1,s,o,l),S=r(!0,s,o,l),D=r(!1,s,o,l),B=D-S+1,u=f-w+1,i=a.getImageData(S,w,B,u);return t.width=B,t.height=u,a.clearRect(0,0,B,u),a.putImageData(i,0,0),t}function L(t,a,s,o){return{red:o[4*(s*a+t)],green:o[4*(s*a+t)+1],blue:o[4*(s*a+t)+2],alpha:o[4*(s*a+t)+3]}}function A(t,a,s,o){return L(t,a,s,o).alpha}function x(t,a,s,o){for(var l=t?1:-1,w=t?0:s-1,f=w;t?f<s:f>-1;f+=l)for(var S=0;S<a;S++)if(A(S,f,a,o))return f;return null}function r(t,a,s,o){for(var l=t?1:-1,w=t?0:a-1,f=w;t?f<a:f>-1;f+=l)for(var S=0;S<s;S++)if(A(f,S,a,o))return f;return null}Object.defineProperty(h,"__esModule",{value:!0}),h.default=j}])})},21518:function(J,R,h){"use strict";h.r(R);function j(r,t,a){this.x=r,this.y=t,this.time=a||new Date().getTime()}j.prototype.velocityFrom=function(r){return this.time!==r.time?this.distanceTo(r)/(this.time-r.time):1},j.prototype.distanceTo=function(r){return Math.sqrt(Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2))},j.prototype.equals=function(r){return this.x===r.x&&this.y===r.y&&this.time===r.time};function L(r,t,a,s){this.startPoint=r,this.control1=t,this.control2=a,this.endPoint=s}L.prototype.length=function(){for(var r=10,t=0,a=void 0,s=void 0,o=0;o<=r;o+=1){var l=o/r,w=this._point(l,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),f=this._point(l,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var S=w-a,D=f-s;t+=Math.sqrt(S*S+D*D)}a=w,s=f}return t},L.prototype._point=function(r,t,a,s,o){return t*(1-r)*(1-r)*(1-r)+3*a*(1-r)*(1-r)*r+3*s*(1-r)*r*r+o*r*r*r};function A(r,t,a){var s,o,l,w=null,f=0;a||(a={});var S=function(){f=a.leading===!1?0:Date.now(),w=null,l=r.apply(s,o),w||(s=o=null)};return function(){var D=Date.now();!f&&a.leading===!1&&(f=D);var B=t-(D-f);return s=this,o=arguments,B<=0||B>t?(w&&(clearTimeout(w),w=null),f=D,l=r.apply(s,o),w||(s=o=null)):!w&&a.trailing!==!1&&(w=setTimeout(S,B)),l}}function x(r,t){var a=this,s=t||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=A(x.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=x.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=r,this._ctx=r.getContext("2d"),this.clear(),this._handleMouseDown=function(o){o.which===1&&(a._mouseButtonDown=!0,a._strokeBegin(o))},this._handleMouseMove=function(o){a._mouseButtonDown&&a._strokeMoveUpdate(o)},this._handleMouseUp=function(o){o.which===1&&a._mouseButtonDown&&(a._mouseButtonDown=!1,a._strokeEnd(o))},this._handleTouchStart=function(o){if(o.targetTouches.length===1){var l=o.changedTouches[0];a._strokeBegin(l)}},this._handleTouchMove=function(o){o.preventDefault();var l=o.targetTouches[0];a._strokeMoveUpdate(l)},this._handleTouchEnd=function(o){var l=o.target===a._canvas;l&&(o.preventDefault(),a._strokeEnd(o))},this.on()}x.prototype.clear=function(){var r=this._ctx,t=this._canvas;r.fillStyle=this.backgroundColor,r.clearRect(0,0,t.width,t.height),r.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},x.prototype.fromDataURL=function(r){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,o=a.ratio||window.devicePixelRatio||1,l=a.width||this._canvas.width/o,w=a.height||this._canvas.height/o;this._reset(),s.src=r,s.onload=function(){t._ctx.drawImage(s,0,0,l,w)},this._isEmpty=!1},x.prototype.toDataURL=function(r){var t;switch(r){case"image/svg+xml":return this._toSVG();default:for(var a=arguments.length,s=Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return(t=this._canvas).toDataURL.apply(t,[r].concat(s))}},x.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},x.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},x.prototype.isEmpty=function(){return this._isEmpty},x.prototype._strokeBegin=function(r){this._data.push([]),this._reset(),this._strokeUpdate(r),typeof this.onBegin=="function"&&this.onBegin(r)},x.prototype._strokeUpdate=function(r){var t=r.clientX,a=r.clientY,s=this._createPoint(t,a),o=this._data[this._data.length-1],l=o&&o[o.length-1],w=l&&s.distanceTo(l)<this.minDistance;if(!(l&&w)){var f=this._addPoint(s),S=f.curve,D=f.widths;S&&D&&this._drawCurve(S,D.start,D.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}},x.prototype._strokeEnd=function(r){var t=this.points.length>2,a=this.points[0];if(!t&&a&&this._drawDot(a),a){var s=this._data[this._data.length-1],o=s[s.length-1];a.equals(o)||s.push({x:a.x,y:a.y,time:a.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(r)},x.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},x.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},x.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},x.prototype._createPoint=function(r,t,a){var s=this._canvas.getBoundingClientRect();return new j(r-s.left,t-s.top,a||new Date().getTime())},x.prototype._addPoint=function(r){var t=this.points,a=void 0;if(t.push(r),t.length>2){t.length===3&&t.unshift(t[0]),a=this._calculateCurveControlPoints(t[0],t[1],t[2]);var s=a.c2;a=this._calculateCurveControlPoints(t[1],t[2],t[3]);var o=a.c1,l=new L(t[1],s,o,t[2]),w=this._calculateCurveWidths(l);return t.shift(),{curve:l,widths:w}}return{}},x.prototype._calculateCurveControlPoints=function(r,t,a){var s=r.x-t.x,o=r.y-t.y,l=t.x-a.x,w=t.y-a.y,f={x:(r.x+t.x)/2,y:(r.y+t.y)/2},S={x:(t.x+a.x)/2,y:(t.y+a.y)/2},D=Math.sqrt(s*s+o*o),B=Math.sqrt(l*l+w*w),u=f.x-S.x,i=f.y-S.y,$=B/(D+B),T={x:S.x+u*$,y:S.y+i*$},_=t.x-T.x,z=t.y-T.y;return{c1:new j(f.x+_,f.y+z),c2:new j(S.x+_,S.y+z)}},x.prototype._calculateCurveWidths=function(r){var t=r.startPoint,a=r.endPoint,s={start:null,end:null},o=this.velocityFilterWeight*a.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,l=this._strokeWidth(o);return s.start=this._lastWidth,s.end=l,this._lastVelocity=o,this._lastWidth=l,s},x.prototype._strokeWidth=function(r){return Math.max(this.maxWidth/(r+1),this.minWidth)},x.prototype._drawPoint=function(r,t,a){var s=this._ctx;s.moveTo(r,t),s.arc(r,t,a,0,2*Math.PI,!1),this._isEmpty=!1},x.prototype._drawCurve=function(r,t,a){var s=this._ctx,o=a-t,l=Math.floor(r.length());s.beginPath();for(var w=0;w<l;w+=1){var f=w/l,S=f*f,D=S*f,B=1-f,u=B*B,i=u*B,$=i*r.startPoint.x;$+=3*u*f*r.control1.x,$+=3*B*S*r.control2.x,$+=D*r.endPoint.x;var T=i*r.startPoint.y;T+=3*u*f*r.control1.y,T+=3*B*S*r.control2.y,T+=D*r.endPoint.y;var _=t+D*o;this._drawPoint($,T,_)}s.closePath(),s.fill()},x.prototype._drawDot=function(r){var t=this._ctx,a=typeof this.dotSize=="function"?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(r.x,r.y,a),t.closePath(),t.fill()},x.prototype._fromData=function(r,t,a){for(var s=0;s<r.length;s+=1){var o=r[s];if(o.length>1)for(var l=0;l<o.length;l+=1){var w=o[l],f=new j(w.x,w.y,w.time),S=w.color;if(l===0)this.penColor=S,this._reset(),this._addPoint(f);else if(l!==o.length-1){var D=this._addPoint(f),B=D.curve,u=D.widths;B&&u&&t(B,u,S)}}else{this._reset();var i=o[0];a(i)}}},x.prototype._toSVG=function(){var r=this,t=this._data,a=this._canvas,s=Math.max(window.devicePixelRatio||1,1),o=0,l=0,w=a.width/s,f=a.height/s,S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttributeNS(null,"width",a.width),S.setAttributeNS(null,"height",a.height),this._fromData(t,function(k,M,F){var b=document.createElement("path");if(!isNaN(k.control1.x)&&!isNaN(k.control1.y)&&!isNaN(k.control2.x)&&!isNaN(k.control2.y)){var N="M "+k.startPoint.x.toFixed(3)+","+k.startPoint.y.toFixed(3)+" "+("C "+k.control1.x.toFixed(3)+","+k.control1.y.toFixed(3)+" ")+(k.control2.x.toFixed(3)+","+k.control2.y.toFixed(3)+" ")+(k.endPoint.x.toFixed(3)+","+k.endPoint.y.toFixed(3));b.setAttribute("d",N),b.setAttribute("stroke-width",(M.end*2.25).toFixed(3)),b.setAttribute("stroke",F),b.setAttribute("fill","none"),b.setAttribute("stroke-linecap","round"),S.appendChild(b)}},function(k){var M=document.createElement("circle"),F=typeof r.dotSize=="function"?r.dotSize():r.dotSize;M.setAttribute("r",F),M.setAttribute("cx",k.x),M.setAttribute("cy",k.y),M.setAttribute("fill",k.color),S.appendChild(M)});var D="data:image/svg+xml;base64,",B='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+o+" "+l+" "+w+" "+f+'"')+(' width="'+w+'"')+(' height="'+f+'"')+">",u=S.innerHTML;if(u===void 0){var i=document.createElement("dummy"),$=S.childNodes;i.innerHTML="";for(var T=0;T<$.length;T+=1)i.appendChild($[T].cloneNode(!0));u=i.innerHTML}var _="</svg>",z=B+u+_;return D+btoa(z)},x.prototype.fromData=function(r){var t=this;this.clear(),this._fromData(r,function(a,s){return t._drawCurve(a,s.start,s.end)},function(a){return t._drawDot(a)}),this._data=r},x.prototype.toData=function(){return this._data},R.default=x}}]);
