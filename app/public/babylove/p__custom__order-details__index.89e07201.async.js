"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[659],{28466:function(w,N,a){a.r(N),a.d(N,{default:function(){return Q}});var B=a(15009),F=a.n(B),P=a(99289),A=a.n(P),$=a(12444),y=a.n($),G=a(72004),g=a.n(G),E=a(25098),m=a.n(E),L=a(31996),j=a.n(L),z=a(26037),x=a.n(z),R=a(9783),f=a.n(R),l=a(12695),T=a(27484),W=a.n(T),b=a(67294),D=a(47866),C=a(61544),S=a(42912),Y=a(92692),e=a(85893),I=function(h){j()(r,h);var p=x()(r);function r(u){var s;return y()(this,r),s=p.call(this,u),f()(m()(s),"cancelOrder",A()(F()().mark(function i(){var d,c,n,v;return F()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,l.Vq.confirm({content:"\u786E\u5B9A\u53D6\u6D88\u8BA2\u5355\u5417\uFF1F"});case 2:if(d=o.sent,d){o.next=5;break}return o.abrupt("return");case 5:return s.setState({isCanceling:!0}),o.t0=S.Z,o.t1=D.c9,o.t2=s.props.orderCode,o.next=11,(0,C.YX)();case 11:return o.t3=o.sent,o.t4={orderCode:o.t2,shoppingCartCode:o.t3},o.next=15,o.t0.post.call(o.t0,o.t1,o.t4);case 15:c=o.sent,n=c.success,v=c.message,n?(l.FN.show({content:"\u53D6\u6D88\u6210\u529F",icon:"success"}),s.props.flushOrderDetails()):l.FN.show({content:v||"\u53D6\u6D88\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",icon:"fail"}),s.setState({isCanceling:!1});case 20:case"end":return o.stop()}},i)}))),f()(m()(s),"lookLogistics",function(){if((0,C.JG)(s.props.orderCode)){l.FN.show({icon:"success",content:"\u7269\u6D41\u5355\u53F7\u5DF2\u590D\u5236\uFF0C\u8DF3\u8F6C\u67E5\u8BE2\u4E2D...",duration:2e3}),setTimeout(function(){window.open("https://m.kuaidi100.com/index.jsp")},2e3);return}l.FN.show({icon:"fail",content:"\u7269\u6D41\u5355\u53F7\u590D\u5236\u5931\u8D25"})}),f()(m()(s),"connectPostSale",function(){l.Vq.confirm({image:"/public/pictures/WX20230519-011105.png",title:"\u957F\u6309\u4FDD\u5B58\u56FE\u7247\u6DFB\u52A0\u552E\u540E\u5BA2\u670D\u5FAE\u4FE1",confirmText:"\u590D\u5236\u5355\u53F7",onConfirm:function(){var d=(0,C.JG)(s.props.orderCode);d?l.FN.show({content:"\u590D\u5236\u6210\u529F",icon:"success"}):l.FN.show({content:"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",icon:"fail"})}})}),s.state={isCanceling:!1},s}return g()(r,[{key:"render",value:function(){return(0,e.jsxs)("div",{className:"baby-love-admin-order-details-actions",children:[this.props.expressCode?(0,e.jsx)(l.zx,{color:"primary",size:"small",disabled:!this.props.expressCode,onClick:this.lookLogistics,children:"\u67E5\u8BE2\u7269\u6D41"}):null,(0,e.jsx)(l.zx,{color:"primary",size:"small",onClick:this.connectPostSale,children:"\u8054\u7CFB\u552E\u540E"})]})}}]),r}(b.Component),M=I,H=function(h){j()(r,h);var p=x()(r);function r(u){var s;return y()(this,r),s=p.call(this,u),f()(m()(s),"copyExpressCode",function(){var i=(0,C.JG)(s.props.expressCode);i?l.FN.show({content:"\u590D\u5236\u6210\u529F",icon:"success"}):l.FN.show({content:"\u590D\u5236\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u590D\u5236",icon:"fail"})}),s.state={},s}return g()(r,[{key:"render",value:function(){var s=this.props,i=s.orderCode,d=s.createdAt,c=s.totalPrice,n=s.expressWay,v=s.expressCode;return(0,e.jsxs)("div",{className:"baby-love-admin-order-details-base-info",children:[(0,e.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u8BA2\u5355\u7F16\u53F7\uFF1A"}),(0,e.jsx)("span",{children:i})]}),(0,e.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u8BA2\u5355\u65F6\u95F4\uFF1A"}),(0,e.jsx)("span",{children:d})]}),(0,e.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u8BA2\u5355\u603B\u4EF7\uFF1A"}),(0,e.jsxs)("span",{children:["\xA5",c]})]}),(0,e.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u914D\u9001\u65B9\u5F0F\uFF1A"}),(0,e.jsx)("span",{children:n||"-"})]}),(0,e.jsxs)("div",{className:"baby-love-admin-order-details-base-info-item",children:[(0,e.jsx)("span",{children:"\u5FEB\u9012\u5355\u53F7\uFF1A"}),(0,e.jsx)("span",{children:v||"-"}),v&&(0,e.jsx)(l.zx,{color:"primary",disabled:!v,fill:"none",onClick:v?this.copyExpressCode:null,children:"\u590D\u5236\u5FEB\u9012\u5355\u53F7"})]})]})}}]),r}(b.Component),J=H,V=a(90336),X=function(h){j()(r,h);var p=x()(r);function r(u){var s;return y()(this,r),s=p.call(this,u),f()(m()(s),"toGoodsDetail",function(i){(0,C.WF)("/goods/details?goodsCode=".concat(i))}),s.state={},s}return g()(r,[{key:"render",value:function(){var s=this,i=this.props,d=i.goods,c=i.totalCount;return(0,e.jsxs)("div",{className:"baby-love-admin-order-details-goods",children:[(0,e.jsxs)("div",{className:"baby-love-admin-order-details-goods-header",children:[(0,e.jsx)("span",{className:"baby-love-admin-order-details-goods-total-shop",children:"BabyLove"}),(0,e.jsxs)("span",{className:"baby-love-admin-order-details-goods-total-count",children:["\u5171 ",c," \u4EF6\u5546\u54C1"]})]}),(0,e.jsx)("ul",{children:(d||[]).map(function(n){var v,t,o;return(0,e.jsxs)("li",{onClick:function(){return s.toGoodsDetail(n.goodsCode)},children:[(0,e.jsx)("div",{className:"baby-love-admin-order-details-goods-picture",style:{backgroundImage:"url(".concat(((v=n.pictures)===null||v===void 0||(t=v[0])===null||t===void 0?void 0:t.pictureUrl)||V,")")}}),(0,e.jsxs)("div",{className:"baby-love-admin-order-details-goods-info",children:[(0,e.jsx)("div",{className:"baby-love-admin-order-details-goods-title",children:(0,e.jsx)(l.mH,{direction:"end",rows:2,content:n.goodsTitle})}),(0,e.jsxs)("div",{className:"baby-love-admin-order-details-goods-details",children:[(0,e.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-price",children:["\xA5 ",n.goodsPrice]}),(0,e.jsxs)("span",{className:"baby-love-admin-order-details-goods-item-count",children:["x",((o=n.ordersGoodsRelations)===null||o===void 0?void 0:o.buyCount)||"?"]})]})]})]},n)})})]})}}]),r}(b.Component),k=X,U=function(h){j()(r,h);var p=x()(r);function r(u){var s;return y()(this,r),s=p.call(this,u),s.state={},s}return g()(r,[{key:"render",value:function(){var s=Y.i[this.props.orderStatus]||{},i=s.icon,d=s.title,c=s.backgroundColor;return(0,e.jsxs)("div",{className:"baby-love-admin-order-details-status",style:{backgroundColor:c},children:[i,(0,e.jsx)("span",{children:d})]})}}]),r}(b.Component),Z=U,K=function(h){j()(r,h);var p=x()(r);function r(u){var s;y()(this,r),s=p.call(this,u),f()(m()(s),"setLoading",function(d){s.setState({isShowLoading:d})}),f()(m()(s),"getOrderDetails",A()(F()().mark(function d(){var c,n;return F()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.orderCode){t.next=2;break}return t.abrupt("return");case 2:return s.setLoading(!0),t.t0=S.Z,t.t1=D.pV,t.t2=s.orderCode,t.next=8,(0,C.YX)();case 8:return t.t3=t.sent,t.t4={orderCode:t.t2,shoppingCartCode:t.t3},t.next=12,t.t0.post.call(t.t0,t.t1,t.t4);case 12:c=t.sent,n=c.data,n&&(n.createdAt=W()(n.createdAt).format("YYYY-MM-DD HH:mm:ss"),s.setState({orderDetails:n})),s.setLoading(!1);case 16:case"end":return t.stop()}},d)}))),s.state={orderDetails:{},isShowLoading:!1};var i=new URLSearchParams(location.search);return s.orderCode=i.get("orderCode"),s}return g()(r,[{key:"componentDidMount",value:function(){this.getOrderDetails()}},{key:"render",value:function(){var s=this.state.orderDetails||{},i=s.status,d=s.orderCode,c=s.expressWay,n=s.expressCode,v=s.totalPrice,t=s.createdAt,o=s.goods,O=s.totalCount;return(0,e.jsx)("div",{className:"baby-love-admin-order-details",children:this.state.isShowLoading?(0,e.jsx)(l.k_,{color:"primary"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"baby-love-admin-order-details-info",children:[(0,e.jsx)(Z,{orderStatus:i}),(0,e.jsx)(J,{orderCode:d,createdAt:t,expressWay:c,expressCode:n,totalPrice:v}),(0,e.jsx)(k,{goods:o,totalCount:O})]}),(0,e.jsx)(M,{orderCode:d,orderStatus:i,expressCode:n,flushOrderDetails:this.getOrderDetails})]})})}}]),r}(b.Component),Q=K}}]);
