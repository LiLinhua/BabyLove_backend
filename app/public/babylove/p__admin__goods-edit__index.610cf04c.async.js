"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[63],{47866:function(V,G,e){e.d(G,{Al:function(){return t},Bv:function(){return h},D2:function(){return C},Dz:function(){return s},Gs:function(){return M},Ir:function(){return N},Lk:function(){return v},M1:function(){return K},OM:function(){return o},Pp:function(){return a},Qc:function(){return T},Vr:function(){return O},X2:function(){return i},XZ:function(){return k},Xh:function(){return I},aV:function(){return g},c5:function(){return u},c9:function(){return l},cl:function(){return E},d0:function(){return R},f9:function(){return j},g7:function(){return $},gR:function(){return r},i4:function(){return n},i9:function(){return p},kL:function(){return Z},kP:function(){return U},mL:function(){return W},nc:function(){return y},o6:function(){return F},pV:function(){return f},re:function(){return m},rx:function(){return Q},tz:function(){return d},ws:function(){return B},x4:function(){return c},xc:function(){return D},yV:function(){return P}});var d="/admin/goods/addGoods",g="/admin/goods/updateGoods",I="/admin/goods/removeGoods",n="/admin/goodsPictures/addGoodsPictures",y="/admin/shoppingCarts/addGoods",u="/admin/shoppingCarts/batchRemoveGoods",E="/admin/shoppingCarts/updateBuyCount",m="/admin/shoppingCarts/queryAllGoodsCount",b="/admin/shoppingCarts/addShoppingCart",p="/admin/goods/queryAllGoods",B="/admin/goods/queryGoodsDetails",O="/admin/shoppingCarts/queryAllShoppingCarts",T="/admin/shoppingCarts/queryAllGoods",U="/admin/shoppingCarts/batchUpdateSelected",M="/admin/orders/queryAllOrders",W="/admin/orders/queryOrderDetails",$="/admin/orders/addOrder",P="/admin/orders/updateOrderBaseInfo",s="/admin/orders/updateOrderGoodsBuyCount",j="/admin/orders/addOrderGoods",k="/admin/orders/removeOrder",N="/admin/catalogs/queryAllCatalogs",Z="/admin/catalogs/createCatalog",F="/admin/catalogs/updateCatalog",o="/admin/catalogs/removeCatalog",r="/custom/shoppingCarts/queryAllGoods",t="/custom/shoppingCarts/updateBuyCount",v="/custom/goods/queryAllGoods",C="/custom/goods/queryGoodsDetails",i="/custom/shoppingCarts/addShoppingCart",R="/custom/shoppingCarts/addGoods",Q="/custom/shoppingCarts/batchRemoveGoods",a="/custom/shoppingCarts/queryAllGoodsCount",K="/custom/shoppingCarts/batchUpdateSelected",D="/custom/orders/queryAllOrders",f="/custom/orders/queryOrderDetails",l="/custom/orders/cancelOrder",h="/custom/catalogs/queryAllCatalogs",c="/user/login",L="/user/logout"},12860:function(V,G,e){e.d(G,{T:function(){return g},x:function(){return I}});var d=e(61544),g=function(y){return[{title:"\u5546\u54C1",className:"baby-love-admin-home-item-goods",onClick:function(){return(0,d.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269",className:"baby-love-admin-home-item-cart",onClick:function(){return(0,d.WF)("/shopping-cart?shoppingCartCode=".concat(y||""),!0)}},{title:"\u8BA2\u5355",className:"baby-love-admin-home-item-order",onClick:function(){return(0,d.WF)("/order/list",!0)}},{title:"\u5206\u7C7B",className:"baby-love-admin-home-item-catalog",onClick:function(){return(0,d.WF)("/catalog/list",!0)}}]},I=function(y){return{custom:[{title:"\u5546\u54C1",onClick:function(){return(0,d.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return(0,d.WF)("/shopping-cart?shoppingCartCode=".concat(y||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return(0,d.WF)("/order/list?shoppingCartCode=".concat(y||""),!0)}}],admin:[{title:"\u5546\u54C1",onClick:function(){return(0,d.WF)("/goods/list",!0)}},{title:"\u8D2D\u7269\u8F66",onClick:function(){return(0,d.WF)("/shopping-cart?shoppingCartCode=".concat(y||""),!0)}},{title:"\u8BA2\u5355",onClick:function(){return(0,d.WF)("/order/list",!0)}}]}}},42912:function(V,G,e){var d=e(6154),g=e(34202),I=e(61544),n=function(b){g.FN.show({icon:"fail",content:b||"\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"})};function y(m){console.log("===========http===========",m);var b=m||{},p=b.data;return p?((!p||p.code!==200||!p.success)&&n(p.message||"\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.resolve(p)):(n("\u7CFB\u7EDF\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),Promise.reject(p))}function u(m){if(!window.navigator.onLine)return n("\u7F51\u7EDC\u5DF2\u65AD\u5F00"),Promise.reject(m.response||{});var b=m.response,p=b.status,B=b.data;if(p){switch(p){case 401:n("\u8BF7\u5148\u767B\u5F55"),(0,I.f9)(),(0,I.GL)();break;case 404:n("\u8BF7\u6C42\u4E0D\u5B58\u5728");break;default:n(B.message||"\u8BF7\u6C42\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5")}return Promise.reject(m.response||{})}}var E=d.Z.create({timeout:12e3});E.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",E.interceptors.request.use(function(m){return m},function(m){return Promise.error(m)}),E.interceptors.response.use(y,u),G.Z=E},61544:function(V,G,e){e.d(G,{F3:function(){return N},GJ:function(){return p},GL:function(){return T},JG:function(){return F},Te:function(){return s},V2:function(){return U},WF:function(){return O},YX:function(){return P},f9:function(){return M},hf:function(){return j},on:function(){return k},xE:function(){return Z},y7:function(){return W},yV:function(){return B}});var d=e(15009),g=e.n(d),I=e(99289),n=e.n(I),y=e(82188),u=e(42912),E=e(12860),m=e(34202),b=e(47866),p=location.pathname.startsWith("/view/admin"),B=function(){return["/view/admin/login","/view/custom/login","/view/login"].includes(location.pathname)},O=function(r,t,v){r&&(v||(location.pathname.startsWith("/view/admin")?r="/view/admin".concat(r):r="/view".concat(r)),t?location.href=r:y.m8.push(r))},T=function(){O("/login?callback=".concat(location.pathname),!0)},U=function(){sessionStorage.setItem("babyLoveToken","1")},M=function(){sessionStorage.removeItem("babyLoveToken")},W=function(){return!!sessionStorage.getItem("babyLoveToken")},$=function(){var o=n()(g()().mark(function r(){var t,v;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,u.Z.post(b.X2);case 2:return t=i.sent,v=t.data,i.abrupt("return",v?v.shoppingCartCode:null);case 5:case"end":return i.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),P=function(){var o=n()(g()().mark(function r(){var t;return g()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(t=localStorage.getItem("babyloveShoppingCartCode"),t){C.next=5;break}return C.next=4,$();case 4:t=C.sent;case 5:if(t){C.next=7;break}return C.abrupt("return",m.FN.show({icon:"fail",content:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"}));case 7:return localStorage.setItem("babyloveShoppingCartCode",t),C.abrupt("return",t);case 9:case"end":return C.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),s=function(r){r&&localStorage.setItem("babyloveShoppingCartCode",r)},j=function(r){r&&localStorage.setItem("babyloveAdminShoppingCartCode",r)},k=function(){return localStorage.getItem("babyloveAdminShoppingCartCode")},N=function(){localStorage.removeItem("babyloveAdminShoppingCartCode")},Z=function(){var o=n()(g()().mark(function r(){var t,v;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,P();case 2:if(t=i.sent,v=(0,E.x)(t),!p){i.next=6;break}return i.abrupt("return",v.admin);case 6:return i.abrupt("return",v.custom);case 7:case"end":return i.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),F=function(r){if(!r)return!1;try{var t=document.createElement("input");return t.value=r,t.style.height=0,document.body.append(t),t.select(),document.execCommand("Copy"),t.remove(),!0}catch(v){return!1}}},57590:function(V,G,e){e.r(G),e.d(G,{default:function(){return v}});var d=e(97857),g=e.n(d),I=e(15009),n=e.n(I),y=e(99289),u=e.n(y),E=e(12444),m=e.n(E),b=e(72004),p=e.n(b),B=e(25098),O=e.n(B),T=e(31996),U=e.n(T),M=e(26037),W=e.n(M),$=e(9783),P=e.n($),s=e(34202),j=e(67294),k=e(71167),N=e.n(k),Z=e(40190),F=e(47866),o=e(42912),r=e(85893),t=function(C){U()(R,C);var i=W()(R);function R(Q){var a;m()(this,R),a=i.call(this,Q),P()(O()(a),"formRef",j.createRef()),P()(O()(a),"getCatalogList",u()(n()().mark(function D(){var f,l;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,o.Z.post(F.Ir);case 2:f=c.sent,l=f.data,Array.isArray(l)&&a.setState({catalogList:l});case 5:case"end":return c.stop()}},D)}))),P()(O()(a),"getGoodsDetails",u()(n()().mark(function D(){var f,l,h,c;return n()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(a.goodsCode){S.next=2;break}return S.abrupt("return");case 2:return S.next=4,o.Z.get(F.ws,{params:{goodsCode:a.goodsCode}});case 4:f=S.sent,l=f.data,l&&(c=g()({},l),Array.isArray(l.pictures)&&(c.pictures=c.pictures.map(function(A){return g()(g()({},A),{},{url:A.pictureUrl})})),(h=a.formRef.current)===null||h===void 0||h.setFieldsValue(c));case 7:case"end":return S.stop()}},D)}))),P()(O()(a),"uploadImgFile",function(){var D=u()(n()().mark(function f(l){var h,c,L;return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return h=new FormData,h.append("files",l),A.next=4,o.Z.post(F.i4,h,{headers:{"Content-Type":"multipart/form-data"}});case 4:if(c=A.sent,L=c.data,!(L&&L[0])){A.next=10;break}return A.abrupt("return",{pictureCode:L[0].pictureCode,url:L[0].pictureUrl});case 10:return A.abrupt("return",{});case 11:case"end":return A.stop()}},f)}));return function(f){return D.apply(this,arguments)}}()),P()(O()(a),"save",u()(n()().mark(function D(){var f,l,h,c,L,S;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return l=(f=a.formRef.current)===null||f===void 0?void 0:f.getFieldsValue(),l.goodsPictureCodes=l.pictures.map(function(x){return x.pictureCode}),h=F.tz,a.goodsCode&&(l.goodsCode=a.goodsCode,h=F.aV),w.next=6,o.Z.post(h,l);case 6:c=w.sent,L=c.success,L&&(s.FN.show({content:"\u4FDD\u5B58\u6210\u529F",icon:"success"}),!a.goodsCode&&((S=a.formRef.current)===null||S===void 0||S.resetFields()));case 9:case"end":return w.stop()}},D)}))),a.state={catalogList:[]};var K=new URLSearchParams(location.search);return a.goodsCode=K.get("goodsCode"),a}return p()(R,[{key:"componentDidMount",value:function(){this.getCatalogList(),this.getGoodsDetails()}},{key:"render",value:function(){var a=this.state,K=a.goodsDetails,D=a.catalogList;return(0,r.jsx)("div",{className:"baby-love-goods-edit",children:(0,r.jsx)("div",{className:"baby-love-goods-edit-form",children:(0,r.jsxs)(s.l0,{ref:this.formRef,footer:(0,r.jsx)(s.zx,{block:!0,type:"submit",color:"primary",size:"large",onClick:this.save,children:"\u4FDD\u5B58"}),children:[(0,r.jsx)(s.l0.Item,{name:"goodsCatalog",label:"\u5546\u54C1\u5206\u7C7B",rules:[{required:!0,message:"\u5546\u54C1\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(s.Y8.Group,{children:D.map(function(f){return(0,r.jsx)(s.Y8,{value:f.catalogCode,children:f.catalogName})})})}),(0,r.jsx)(s.l0.Item,{name:"goodsTitle",label:"\u5546\u54C1\u6807\u9898",rules:[{required:!0,message:"\u5546\u54C1\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(s.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u6807\u9898"})}),(0,r.jsx)(s.l0.Item,{name:"goodsSubtitle",label:"\u5546\u54C1\u526F\u6807\u9898",rules:[{required:!1,message:"\u5546\u54C1\u526F\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(s.II,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u526F\u6807\u9898"})}),(0,r.jsx)(s.l0.Item,{name:"pictures",label:"\u5546\u54C1\u56FE\u7247",rules:[{required:!0,message:"\u5546\u54C1\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(s.wA,{upload:this.uploadImgFile})}),(0,r.jsx)(s.l0.Item,{name:"goodsPrice",label:"\u5546\u54C1\u4EF7\u683C",rules:[{required:!0,message:"\u5546\u54C1\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(s.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u4EF7\u683C"})}),(0,r.jsx)(s.l0.Item,{name:"goodsInventory",label:"\u5546\u54C1\u5E93\u5B58",rules:[{required:!0,message:"\u5546\u54C1\u5E93\u5B58\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(s.II,{min:0,type:"number",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5E93\u5B58"})}),(0,r.jsx)(s.l0.Item,{name:"goodsDetails",label:"\u5546\u54C1\u8BE6\u60C5",rules:[{required:!1,message:"\u5546\u54C1\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,r.jsx)(N(),{theme:"snow",value:K,onChange:this.setGoodsDetails})})]})})})}}]),R}(j.Component),v=t}}]);
